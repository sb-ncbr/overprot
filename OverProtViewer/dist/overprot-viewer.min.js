!function(e){"use strict";var t,o,n,i,l,a;!function(t){var o;o=function(){let t=e.schemeCategory10.map(t=>e.rgb(t));return{neutral:t.splice(7,1)[0],scheme:t}}(),t.NEUTRAL_COLOR=o.neutral,t.COLOR_SCHEME=o.scheme,t.bySseType=function(e){return"h"==(e=e.toLowerCase())?t.NEUTRAL_COLOR:"e"==e?t.COLOR_SCHEME[0]:t.COLOR_SCHEME[1]},t.byIndex0=function(e){return t.COLOR_SCHEME[e%t.COLOR_SCHEME.length]},t.byIndex1=function(e){return e>=1?t.COLOR_SCHEME[(e-1)%t.COLOR_SCHEME.length]:t.NEUTRAL_COLOR},t.byLinHeatmap=function(t,o){const n=t/o;return e.rgb(e.interpolateInferno(n))},t.byExpHeatmap=function(t,o){const n=1-Math.pow(2,-t/o);return e.rgb(e.interpolateInferno(n))}}(t||(t={})),function(e){let t,o;!function(e){e[e.Uniform=0]="Uniform",e[e.Type=1]="Type",e[e.Sheet=2]="Sheet",e[e.Stdev=3]="Stdev"}(t=e.ColorMethod||(e.ColorMethod={})),function(e){e[e.Rectangle=0]="Rectangle",e[e.SymCdf=1]="SymCdf"}(o=e.ShapeMethod||(e.ShapeMethod={}))}(o||(o={})),function(n){n.CANVAS_HEIGHT=300,n.CANVAS_WIDTH=1500,n.ZOOM_STEP_RATIO=1.25,n.ZOOM_STEP_RATIO_MOUSE=n.ZOOM_STEP_RATIO,n.SHIFT_STEP_RELATIVE=.2,n.MAX_EMPTY_X_MARGIN=0,n.MAX_EMPTY_Y_MARGIN=0,n.MAX_X_ZOOMOUT=1/(1-2*n.MAX_EMPTY_X_MARGIN),n.MAX_Y_ZOOMOUT=1/(1-2*n.MAX_EMPTY_Y_MARGIN),n.TRANSITION_DURATION=e.transition().duration(),n.TOOLTIP_DELAY=600,n.MOUSE_HOLD_BEHAVIOR_INITIAL_SLEEP_TIME=500,n.MOUSE_HOLD_BEHAVIOR_STEP_SLEEP_TIME=50,n.TEMPORARY_CENTRAL_MESSAGE_TIMEOUT=1e3,n.TOOLTIP_OFFSET={x:12,y:0},n.NODE_STROKE_WIDTH=1,n.NODE_STROKE_WIDTH_HIGHLIGHTED=3,n.EDGE_COLOR="#808080",n.NODE_FILL=t.NEUTRAL_COLOR,n.NODE_STROKE=t.NEUTRAL_COLOR.darker(),n.MINIMAL_WIDTH_FOR_SSE_LABEL=20,n.HEATMAP_MIDDLE_VALUE=5,n.DEFAULT_OCCURRENCE_THRESHOLD=.2,n.DEFAULT_BETA_CONNECTIVITY_VISIBILITY=!0,n.DEFAULT_COLOR_METHOD=o.ColorMethod.Sheet,n.DEFAULT_SHAPE_METHOD=o.ShapeMethod.Rectangle,n.LENGTH_SCALE=4,n.OCCURRENCE_SCALE=100,n.FLOOR_HEIGHT=1.5*n.OCCURRENCE_SCALE,n.TOP_MARGIN=.25*n.OCCURRENCE_SCALE,n.BOTTOM_MARGIN=.25*n.OCCURRENCE_SCALE,n.LEFT_MARGIN=4*n.LENGTH_SCALE,n.RIGHT_MARGIN=4*n.LENGTH_SCALE,n.GAP_LENGTH=3*n.LENGTH_SCALE,n.KNOB_LENGTH=1*n.LENGTH_SCALE,n.ARC_MAX_DEVIATION=.5*n.OCCURRENCE_SCALE+Math.min(n.TOP_MARGIN,n.BOTTOM_MARGIN),n.ARC_EXTRA_MAJOR_WRT_WORLD_WIDTH=.001,n.ARC_MAX_MINOR=n.ARC_MAX_DEVIATION/(1-Math.sqrt(1-Math.pow(1/(1+2*n.ARC_EXTRA_MAJOR_WRT_WORLD_WIDTH),2))),n.ARC_SMART_DEVIATION_PARAM_WRT_WORLD_WIDTH=.2,n.HELIX_TYPE="h",n.STRAND_TYPE="e",n.HANGING_TEXT_OFFSET=5,n.RESET_SYMBOL="&#x27F3;",n.OPEN_POPUP_SYMBOL=" &#x25BE;"}(n||(n={})),function(e){function t(e){return[e.x+.5*e.width,e.y+.5*e.height]}function o(e,t){e.zoomout=i(t,e.minZoomout,e.maxZoomout),e.xZoomout=i(e.zoomout,e.minXZoomout,e.maxXZoomout),e.yZoomout=i(e.zoomout,e.minYZoomout,e.maxYZoomout)}function i(e,t,o){return Math.min(Math.max(e,t),o)}function l(e,t=0){return Math.round(e*Math.pow(10,t))/Math.pow(10,t)}e.newRectangle=function(){return{x:-1,y:-1,width:2,height:2}},e.rectangleFromCanvas=function(e){return{x:0,y:0,width:+e.style("width").replace("px",""),height:+e.style("height").replace("px","")}},e.rectangleCenter=t,e.newZoomInfo=function(e,t,o,n,l){e>t&&console.warn("newZoomInfo(): minXZoomout > maxXZoomout"),o>n&&console.warn("newZoomInfo(): minYZoomout > maxYZoomout");let a=Math.min(e,o),r=Math.max(t,n),s=i(l,a,t);return{zoomout:s,xZoomout:i(s,e,t),yZoomout:i(s,o,n),minZoomout:a,maxZoomout:r,minXZoomout:e,maxXZoomout:t,minYZoomout:o,maxYZoomout:n,initialZoomout:l}},e.zoomInfoZoomOut=function(e,t){o(e,e.zoomout*t)},e.zoomInfoSetZoomout=o,e.zoomAllZoomout=function(e,t){return Math.max(e.width/t.width,e.height/t.height)},e.centeredVisWorld=function(e,o,n){let i=o.width*n.xZoomout,l=o.height*n.yZoomout,[a,r]=t(e);return{x:a-.5*i,y:r-.5*l,width:i,height:l}},e.constrain=i,e.arcPathD_circle=function(e,t,o,n,i=1){if(0==t)return`M${e.x1},${e.y1} L${e.x2},${e.y2}`;{let{x1:l,y1:a,x2:r,y2:s}=e,c=r-l,d=s-a,h=Math.abs(c),u=t*h/(h+o),p=u/2+(Math.pow(c/i,2)+Math.pow(d,2))/(8*u);return`M${r},${s} A${p*i},${p} 0 0,${n?1:0} ${l},${a}`}},e.arcPathD_ellipse=function(e,t,o,i,l=1){if(0==o)return`M${e.x1},${e.y1} L${e.x2},${e.y2}`;{let{x1:a,y1:r,x2:s,y2:c}=e,d=c-r,h=s-a,u=h/l,p=Math.sqrt(Math.pow(u,2)+Math.pow(d,2))/2+n.ARC_EXTRA_MAJOR_WRT_WORLD_WIDTH*t/l,v=Math.min(o*Math.sqrt(Math.abs(h)/t),p),m=Math.atan(d/u),[f,g,E]=function(e,t,o,n){const{cos:i,sin:l,sqrt:a,atan:r}=Math;if(1==n)return[e,t,o];if(0==o||0==l(2*o))return[n*e,t,o];if(e==t)return[n*e,t,0];const s=Math.pow(n,2)*Math.pow(e,2)*Math.pow(i(o),2)+Math.pow(e,2)*Math.pow(l(o),2),c=2*(1-Math.pow(n,2))*e*t*i(o)*l(o),d=Math.pow(n,2)*Math.pow(t,2)*Math.pow(l(o),2)+Math.pow(t,2)*Math.pow(i(o),2),h=c,u=2*(s-d),p=-c,v=Math.pow(u,2)-4*h*p;let m=(-u+a(v))/(2*h),f=(-u-a(v))/(2*h),g=a((s+c*m+d*Math.pow(m,2))/(1+Math.pow(m,2))),E=a((s+c*f+d*Math.pow(f,2))/(1+Math.pow(f,2)));g<E&&([m,f]=[f,m],[g,E]=[E,g]);const _=1/(1+Math.pow(m,2)),T=1-_,w=m/(1+Math.pow(m,2)),M=Math.pow(e,2)*i(o)*l(o)*_+e*t*w+Math.pow(t,2)*i(o)*l(o)*T,A=n*(Math.pow(e,2)*Math.pow(i(o),2)*_-Math.pow(t,2)*Math.pow(l(o),2)*T);let y=r(M/A);return[g,E,y]}(p,v,m,l);return`M${s},${c} A${f},${g} ${E*=180/Math.PI} 0,${i?1:0} ${a},${r}`}},e.arcPathD_bezier=function(e,t,o,n,i=1){if(0==t)return`M${e.x1},${e.y1} L${e.x2},${e.y2}`;{let{x1:i,y1:l,x2:a,y2:r}=e,s=a-i,c=Math.abs(s),d=t*c/(c+o)*(n?-1:1);const h=.05*s,u=1.32;return`M${i},${l} C${i+h},${l-d*u} ${a-h},${r-d*u} ${a},${r}`}},e.symCdfPolygonPoints=function(e,o){let[n,i]=t(e),a=o[o.length-1][0],r=o[0][0]>0?1:1-o[0][1],s=.5*e.width/a,c=.5*e.height/r,d=[];o[0][0]>0&&(d.push([0,c]),d.push([o[0][0]*s,c])),d.push([o[0][0]*s,(1-o[0][1])*c]);for(let e=1;e<o.length;e++)d.push([o[e][0]*s,(1-o[e-1][1])*c]),d.push([o[e][0]*s,(1-o[e][1])*c]);let h=[];for(let e=0;e<d.length-1;e++)h.push([n+d[e][0],i+d[e][1]]);for(let e=d.length-1;e>0;e--)h.push([n+d[e][0],i-d[e][1]]);for(let e=0;e<d.length-1;e++)h.push([n-d[e][0],i-d[e][1]]);for(let e=d.length-1;e>0;e--)h.push([n-d[e][0],i+d[e][1]]);return h.map(e=>l(e[0],1)+","+l(e[1],1)).join(" ")},e.rectToScreen=function(e,t,o){let{x:n,y:i,width:l,height:a}=o;return{x:(n-e.x)/e.width*t.width+t.x,y:(i-e.y)/e.height*t.height+t.y,width:l/e.width*t.width,height:a/e.height*t.height}},e.lineToScreen=function(e,t,o){let{x1:n,y1:i,x2:l,y2:a}=o;return{x1:(n-e.x)/e.width*t.width+t.x,y1:(i-e.y)/e.height*t.height+t.y,x2:(l-e.x)/e.width*t.width+t.x,y2:(a-e.y)/e.height*t.height+t.y}},e.round=l}(i||(i={})),function(t){function o(){return{nodes:[],precedence:[],beta_connectivity:[],levels:[],precedenceLines:[],activeNodes:[],origPrecedence:[],origBetaConnectivity:[],error:null}}function l(e){let t={nodes:[],precedence:[],beta_connectivity:[],levels:[],precedenceLines:[],activeNodes:[],origPrecedence:[],origBetaConnectivity:[],error:null};return t.error=e,t}function a(e){let t=[],o=new Set(e.activeNodes),n=e.precedence;for(;o.size>0;){let e=new Set(o);n.forEach(t=>e.delete(t[1])),n=n.filter(t=>!e.has(t[0])),e.forEach(e=>o.delete(e)),t.push(Array.from(e))}e.levels=t}function r(e,t,o,n){let i=o[e].filter(e=>e!=t);for(;i.length>0;){let e=i.pop();if(-1!=n[e]&&n[e]<n[t])i.push(...o[e]);else if(e==t)return!0}return!1}function s(e,t){let o=new Array(e),n=new Array(e);for(let t=0;t<e;t++)o[t]=[],n[t]=[];return t.forEach(e=>{o[e[1]].push(e[0]),n[e[0]].push(e[1])}),{ins:o,outs:n}}t.newDag=o,t.dagFromJson=function(t){var o;let n=null;try{let i=JSON.parse(t);return n=i.error=null!==(o=i.error)&&void 0!==o?o:null,i.nodes.forEach(e=>e.active=!0),i.levels=[],i.precedenceLines=[],i.activeNodes=e.range(i.nodes.length),i.origPrecedence=i.precedence,i.origBetaConnectivity=i.beta_connectivity,i}catch(e){return n=null!==n&&void 0!==n?n:"Failed to parse input file.",console.warn(n,"\n",e,"\n",t),l(n)}},t.newDagWithError=l,t.newNodeVisual=function(){return{rect:i.newRectangle(),fill:n.NODE_FILL.hex(),stroke:n.NODE_STROKE.hex()}},t.filterDagAndAddLevels=function(t,o){if(0==o)t.nodes.forEach(e=>e.active=!0),t.activeNodes=e.range(t.nodes.length),t.precedence=t.origPrecedence,t.beta_connectivity=t.origBetaConnectivity,a(t);else{let n=t.nodes.length;t.nodes.forEach(e=>e.active=e.occurrence>=o);let i=e.range(n).filter(e=>t.nodes[e].active),{ins:l,outs:c}=s(n,t.origPrecedence);for(let e=0;e<n;e++)t.nodes[e].active||l[e].forEach(t=>{c[e].forEach(e=>{c[t].includes(e)||(c[t].push(e),l[e].push(t))})});t.activeNodes=i,t.precedence=[],i.forEach(e=>{c[e].forEach(o=>{t.nodes[o].active&&t.precedence.push([e,o])})}),a(t),function(e){let t=e.nodes.length,o=new Array(t).fill(-1);e.levels.forEach((e,t)=>e.forEach(e=>o[e]=t));let n=[],{outs:i}=s(t,e.precedence);for(let t=0;t<e.levels.length;t++){const l=e.levels[t];l.forEach(e=>{i[e].forEach(l=>{o[l]!=t+1&&r(e,l,i,o)||n.push([e,l])})})}e.precedence=n}(t)}},t.getNodeMinMaxLength=function(e){let t=e.cdf.map(e=>e[0]).filter(e=>e>0);return 0==t.length?[0,0]:[t[0],t[t.length-1]]}}(l||(l={})),function(t){function a(){return{file:"",width:n.CANVAS_WIDTH,height:n.CANVAS_HEIGHT,colorMethod:n.DEFAULT_COLOR_METHOD,shapeMethod:n.DEFAULT_SHAPE_METHOD,betaConnectivityVisibility:n.DEFAULT_BETA_CONNECTIVITY_VISIBILITY,occurrenceThreshold:n.DEFAULT_OCCURRENCE_THRESHOLD}}function r(e,t,o,n){return null===t?n:void 0!==o[t]?o[t]:(console.warn(`Attribute "${e}" has invalid value "${t}". Allowed values: ${Object.keys(o)}.`),n)}function s(e,t,o,n=[]){if(null===t)return o;{let i=parseInt(t);return isNaN(i)?(console.warn(`Attribute "${e}" has invalid value "${t}". Value must be an integer.`),o):n.length>=2&&(i<n[0]||i>n[1])?(console.warn(`Attribute "${e}" has invalid value "${t}". Value must be an integer between ${n[0]} and ${n[1]}.`),o):i}}t.newViewer=function(e,t,o,n=null){return{mainDiv:e,guiDiv:t,canvas:o,data:l.newDag(),world:i.newRectangle(),visWorld:i.newRectangle(),screen:i.rectangleFromCanvas(o),zoom:i.newZoomInfo(1,1,1,1,1),settings:null!==n&&void 0!==n?n:a()}},t.newSettings=a,t.newSettingsFromHTMLElement=function(t){var i;let l=["id","file","width","height","color-method","shape-method","beta-connectivity","occurrence-threshold"];["file"].forEach(e=>{t.hasAttribute(e)||console.error(`Missing attribute: "${e}".`)});for(let e=0;e<t.attributes.length;e++){let o=t.attributes.item(e).name;l.includes(o)||console.warn(`Unknown attribute: "${o}"`)}let a=e.select(t),c={uniform:o.ColorMethod.Uniform,type:o.ColorMethod.Type,sheet:o.ColorMethod.Sheet,variability:o.ColorMethod.Stdev},d={rectangle:o.ShapeMethod.Rectangle,symcdf:o.ShapeMethod.SymCdf};return{file:null!==(i=a.attr("file"))&&void 0!==i?i:"",height:s("height",a.attr("height"),n.CANVAS_HEIGHT),width:s("width",a.attr("width"),n.CANVAS_WIDTH),colorMethod:r("color-method",a.attr("color-method"),c,n.DEFAULT_COLOR_METHOD),shapeMethod:r("shape-method",a.attr("shape-method"),d,n.DEFAULT_SHAPE_METHOD),betaConnectivityVisibility:r("beta-connectivity",a.attr("beta-connectivity"),{on:!0,off:!1},n.DEFAULT_BETA_CONNECTIVITY_VISIBILITY),occurrenceThreshold:function(e,t,o,n=[],i=!1){if(null===t)return o;{let l=parseFloat(t);return i&&t.includes("%")&&(l*=.01),isNaN(l)?(console.warn(`Attribute "${e}" has invalid value "${t}". Value must be a float.`),o):n.length>=2&&(l<n[0]||l>n[1])?(console.warn(`Attribute "${e}" has invalid value "${t}". Value must be a float between ${n[0]} and ${n[1]}.`),o):l}}("occurrence-threshold",a.attr("occurrence-threshold"),n.DEFAULT_OCCURRENCE_THRESHOLD,[0,1],!0)}}}(a||(a={}));var r,s,c=function(e,t,o,n){return new(o||(o=Promise))(function(i,l){function a(e){try{s(n.next(e))}catch(e){l(e)}}function r(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,r)}s((n=n.apply(e,t||[])).next())})};!function(l){function a(e,t=n.ZOOM_STEP_RATIO,o){i.zoomInfoZoomOut(e.zoom,t);let[l,a]=void 0!=o?[o[0]/e.screen.width,o[1]/e.screen.height]:[.5,.5],s=e.screen.width*e.zoom.xZoomout,c=e.screen.height*e.zoom.yZoomout,{x:d,y:h,width:p,height:v}=e.visWorld;e.visWorld.x=d+(p-s)*l,e.visWorld.y=h+(v-c)*a,e.visWorld.width=s,e.visWorld.height=c,f(e),u(e),r(e)}function r(e){e.mainDiv.selectAll("div.button#zoom-out").attr("disabled",e.zoom.zoomout>=e.zoom.maxZoomout?"true":null),e.mainDiv.selectAll("div.button#zoom-in").attr("disabled",e.zoom.zoomout<=e.zoom.minZoomout?"true":null),e.mainDiv.selectAll("div.button#zoom-reset").attr("disabled",e.zoom.zoomout==e.zoom.initialZoomout?"true":null)}function s(t,o){return(o=o||t.mainDiv.select("div.tooltip")).style("left",e.event.clientX+n.TOOLTIP_OFFSET.x).style("top",e.event.clientY+n.TOOLTIP_OFFSET.y)}function d(t,o=(t=>e.select(t))){t.on("mouseenter.point",(e,t,n)=>{o(n[t]).attr("pointed","true")}),t.on("mouseleave.point",(e,t,n)=>{o(n[t]).attr("pointed",null)})}function h(e){return new Promise(t=>setTimeout(t,e))}function u(e,t=!0){let o=t?n.TRANSITION_DURATION:0,l=e.canvas.select("g.nodes").selectAll("g.node").filter(e=>e.active);l.select("rect").transition().duration(o).attrs(t=>i.rectToScreen(e.visWorld,e.screen,t.visual.rect)),l.select("polygon").transition().duration(o).attr("points",t=>i.symCdfPolygonPoints(i.rectToScreen(e.visWorld,e.screen,t.visual.rect),t.cdf)),l.select("text").transition().duration(o).attrs(t=>{let{x:o,y:l,height:a,width:r}=i.rectToScreen(e.visWorld,e.screen,t.visual.rect);return{x:o+r/2,y:l+a+n.HANGING_TEXT_OFFSET}}).style("opacity",t=>p(e,t)?1:0),e.canvas.select("g.edges").selectAll("line").transition().duration(o).attrs(t=>i.lineToScreen(e.visWorld,e.screen,t));let a=n.ARC_MAX_MINOR/e.zoom.yZoomout,r=e.data;r.beta_connectivity.forEach(e=>e[3]=r.nodes[e[0]].active&&r.nodes[e[1]].active?1:0),e.canvas.select("g.beta-connectivity").selectAll("path").transition().duration(o).attr("d",t=>{if(0==t[3])return"";let[o,n,l]=t,r=e.data.nodes[o].visual.rect,s=e.data.nodes[n].visual.rect,c=i.lineToScreen(e.visWorld,e.screen,{x1:r.x+.5*r.width,y1:r.y+.5*r.height,x2:s.x+.5*s.width,y2:s.y+.5*s.height}),d=e.zoom.yZoomout/e.zoom.xZoomout;return i.arcPathD_ellipse(c,e.world.width/e.zoom.xZoomout,a,1==l,d)})}function p(e,t){return i.rectToScreen(e.visWorld,e.screen,t.visual.rect).width>=n.MINIMAL_WIDTH_FOR_SSE_LABEL}function v(e,t=0){return e.transition().delay(t).duration(n.TRANSITION_DURATION).style("opacity",0).remove()}function m(e,t=0){if(0==e.size())return e.transition();let o=e.style("opacity");return e.style("opacity",0).transition().delay(t).duration(n.TRANSITION_DURATION).style("opacity",o)}function f(e){let{x:t,y:o,width:l,height:a}=e.world,{x:r,y:s,width:c,height:d}=e.visWorld;c<l*n.MAX_X_ZOOMOUT?e.visWorld.x=i.constrain(r,t-n.MAX_EMPTY_X_MARGIN*c,t+l+n.MAX_EMPTY_X_MARGIN*c-c):e.visWorld.x=t+.5*l-.5*c,d<a*n.MAX_Y_ZOOMOUT?e.visWorld.y=i.constrain(s,o-n.MAX_EMPTY_Y_MARGIN*d,o+a+n.MAX_EMPTY_Y_MARGIN*d-d):e.visWorld.y=o+.5*a-.5*d}l.zoomOut=a,l.zoomIn=function(e,t=n.ZOOM_STEP_RATIO,o){a(e,1/t,o)},l.zoomAll=function(e){i.zoomInfoSetZoomout(e.zoom,e.zoom.initialZoomout),e.visWorld=i.centeredVisWorld(e.world,e.screen,e.zoom),u(e),r(e)},l.zoomSet=function(e,t,o){i.zoomInfoSetZoomout(e.zoom,t);let[n,l]=null!==o&&void 0!==o?o:i.rectangleCenter(e.visWorld),a=e.screen.width*e.zoom.xZoomout,s=e.screen.height*e.zoom.yZoomout;e.visWorld={x:n-.5*a,y:l-.5*s,width:a,height:s},f(e),u(e,!1),r(e)},l.shift=function(e,t,o){let{width:n,height:i}=e.visWorld;e.visWorld.x+=t*n,e.visWorld.y+=o*i,f(e),u(e)},l.shiftByMouse=function(e,t,o){let{width:n,height:i}=e.visWorld,{width:l,height:a}=e.screen;e.visWorld.x+=t*n/l,e.visWorld.y+=o*i/a,f(e),u(e,!1)},l.setTooltips=function(t,o,i,l=!1,a=!1){if(null===i)o.on("mouseenter.tooltip",null).on("mousemove.tooltip",null).on("mouseleave.tooltip",null).on("click.tooltip",null);else{let r=i.map(e=>null!=e),c=i.filter(e=>null!=e);o.filter((e,t)=>r[t]).on("mouseenter.tooltip",(o,i,l)=>(function(t,o,i,l=!1){var a;if("pinned"!=e.select(o).attr("tooltip")){let r=t.mainDiv.append("div").attr("class","tooltip").attr("type","hover").html(i);s(t,r),null===(a=e.select(o))||void 0===a||a.attr("tooltip","hover"),m(r,l?n.TOOLTIP_DELAY:0)}})(t,l[i],c[i],a)).on("mousemove.tooltip",(e,o)=>(function(e){s(e,e.mainDiv.selectAll("div.tooltip[type=hover]"))})(t)).on("mouseleave.tooltip",(e,o)=>(function(e){e.mainDiv.selectAll("div.tooltip[type=hover]").remove(),e.mainDiv.selectAll("[tooltip=hover]").attr("tooltip",null)})(t)),l&&o.filter((e,t)=>r[t]).on("click.tooltip",(o,n,i)=>(function(t,o,n){var i;let l=t.mainDiv.append("div").attr("class","tooltip").attr("type","pre-pinned").html(n);s(t,l),null===(i=e.select(o))||void 0===i||i.attr("tooltip","pre-pinned"),t.mainDiv.on("click.tooltip",()=>{t.mainDiv.selectAll("div.tooltip[type=hover],div.tooltip[type=pinned]").remove(),t.mainDiv.selectAll("div.tooltip[type=pre-pinned]").attr("type","pinned"),t.mainDiv.selectAll("[tooltip=hover],[tooltip=pinned]").attr("tooltip",null),t.mainDiv.selectAll("[tooltip=pre-pinned]").attr("tooltip","pinned")})})(t,i[n],c[n])),o.filter((e,t)=>!r[t]).on("mouseenter.tooltip",null).on("mousemove.tooltip",null).on("mouseleave.tooltip",null).on("click.tooltip",null)}},l.addPointBehavior=d,l.addPickBehavior=function(t,o,n=(t=>e.select(t))){o.on("click.pick",(e,t,o)=>{n(o[t]).attr("picked","pre-picked")}),t.guiDiv.on("click.pick",()=>{t.guiDiv.selectAll("[picked=picked]").attr("picked",null),t.guiDiv.selectAll("[picked=pre-picked]").attr("picked","picked")})},l.addMouseHoldBehavior=function(t,o,i,l){t.on("mousedown",()=>c(this,void 0,void 0,function*(){if(1==e.event.which||void 0==e.event.which){let e=Math.random().toString(36).slice(2);for(o(),t.attr("pressed",e),yield h(n.MOUSE_HOLD_BEHAVIOR_INITIAL_SLEEP_TIME);t.attr("pressed")==e;)i(),yield h(n.MOUSE_HOLD_BEHAVIOR_STEP_SLEEP_TIME)}})),t.on("mouseup",()=>c(this,void 0,void 0,function*(){t.attr("pressed",null),l()})),t.on("mouseleave",()=>c(this,void 0,void 0,function*(){t.attr("pressed",null),l()}))},l.recolor=function(i,l=!0){let a=l?n.TRANSITION_DURATION:0;i.canvas.select("g.nodes").selectAll("g.node").selectAll("rect,polygon").transition().duration(a).style("fill",e=>e.visual.fill).style("stroke",e=>e.visual.stroke),function(o,i,l=!0){var a,r,s,c;if(v(o.canvas.selectAll("g.heatmap-bar")),i){let i=function(o,i,l,a,r,s=""){let c=o.append("g").attr("class","heatmap-bar").attr("transform",`translate(${i.x},${i.y})`),d=(c.append("text").attr("class","heatmap-bar-label").attrs({x:-5,y:.5*i.height}).text(s),Math.floor(i.width)),h=(i.width-1)/d,u=c.append("g").attr("class","heatmap-bar-fill"),p=c.append("g").attr("class","heatmap-bar-stroke");return u.selectAll("rect").data(e.range(d)).enter().append("rect").attrs(e=>({x:e*h,y:0,width:h+1,height:i.height,stroke:"none",fill:t.byExpHeatmap(e/d*l,a).hex()})),p.append("rect").attrs(e=>({x:0,y:0,width:i.width,height:i.height,fill:"none"})),c.append("g").attr("class","heatmap-bar-ticks").selectAll("text").data(e.range(Math.floor(l/r)+1)).enter().append("text").attr("x",e=>e*r/l*i.width).attr("y",i.height+n.HANGING_TEXT_OFFSET).text(e=>e*r),c}(o.canvas,{x:o.screen.width-200-15,y:5,width:200,height:20},15,5,5,"3D variability [Å]"),d=null===(r=null===(a=o.mainDiv.select("div.control-panel#main-panel").node())||void 0===a?void 0:a.getBoundingClientRect())||void 0===r?void 0:r.right,h=null===(c=null===(s=i.node())||void 0===s?void 0:s.getBoundingClientRect())||void 0===c?void 0:c.left;void 0!==d&&void 0!==h&&d>h&&function(e,t,o,i){e.attr("transform",`translate(${t},${o})`);let l=e.select("g.heatmap-bar-ticks").selectAll("text"),a=e.select("g.heatmap-bar-stroke rect").attr("height");i?(l.attr("y",-n.HANGING_TEXT_OFFSET),l.style("dominant-baseline","alphabetic")):(l.attr("y",a+n.HANGING_TEXT_OFFSET),l.style("dominant-baseline","hanging"))}(i,o.screen.width-200-15,o.screen.height-5-20,!0),l&&m(i)}}(i,i.settings.colorMethod==o.ColorMethod.Stdev,l)},l.redraw=u,l.nodeBigEnoughForLabel=p,l.showBetaConnectivity=function(e,t,o=!0){e.settings.betaConnectivityVisibility=t;let n=e.canvas.selectAll("g.beta-connectivity");if(n.size()>0&&!t)console.log("Hiding beta-connectivity."),o?v(n):n.remove();else if(0==n.size()&&t){console.log("Showing beta-connectivity.");let t=e.data;t.beta_connectivity.forEach(e=>e[3]=t.nodes[e[0]].active&&t.nodes[e[1]].active?1:0);let n=e.canvas.append("g").attr("class","beta-connectivity");d(n.selectAll().data(t.beta_connectivity).enter().append("path").style("stroke",e=>t.nodes[e[0]].visual.stroke)),u(e,!1),o&&m(n)}},l.fadeOutRemove=v,l.fadeIn=m}(r||(r={})),function(t){function o(){return e.selectAll()}function l(e,t,n,i,l,r){let s={base:{viewer:e,id:t,children:[],div:o(),tooltip:r,show:e=>a(s,e)},text:n,square:i,onClick:l};return s}function a(t,o){t.base.div=o.append("div").attr("class",t.square?"button square-button":"button").attr("id",t.base.id),t.base.div.append("div").attr("class","button-text").html(t.text),r.setTooltips(t.base.viewer,t.base.div,[t.base.tooltip],!1,!0),t.base.div.on("click",t.onClick),t.base.div.on("dblclick",()=>{e.event.stopPropagation()})}function s(e,t){e.text=t,e.base.div.select("div.button-text").html(t)}function c(t,i,r,s,c){let d={base:{viewer:t,id:i,children:[],div:o(),tooltip:c,show:e=>(function(e,t){e.base.div=t.append("div").attr("class",e.autocollapse?"popup autocollapse":"popup").attr("id",e.base.id);let o=e.base.div.append("div").attr("class","popup-head");e.base.div.data([e]),a(e.headButton,o)})(d,e)},headButton:l(t,null,r+n.OPEN_POPUP_SYMBOL,!1,()=>(function(t){t.base.div.selectAll("div.popup-tail").size()>0?h(t):(u(t.base.viewer),function(t){var o;let n=t.base.div.select("div.popup-head"),i=t.base.div.append("div").attr("class","popup-tail");t.base.children.forEach(e=>e.base.show(i));let l=n.node().getBoundingClientRect().width,a=null===(o=i.node())||void 0===o?void 0:o.getBoundingClientRect().width;void 0!==a&&void 0!==l&&a<l&&i.style("width",l);t.autocollapse&&(t.base.viewer.mainDiv.on("click.autocollapse-popups",()=>u(t.base.viewer)),i.on("click.autocollapse-popups",()=>e.event.stopPropagation()))}(t),e.event.stopPropagation())})(d),c),autocollapse:s};return d}function d(e,t){e.base.children.push(t)}function h(e){e.base.div.selectAll("div.popup-tail").remove()}function u(e){e.mainDiv.selectAll("div.popup.autocollapse").each(e=>h(e))}function p(e,t){s(e.headButton,t+n.OPEN_POPUP_SYMBOL)}function v(e,t,n,i,l,a){let s={base:{viewer:e,id:t,children:[],div:o(),tooltip:a,show:e=>(function(e,t){e.base.div=t.append("div").attr("class","listbox").attr("id",e.base.id);e.base.div.selectAll().data(e.namesValuesTooltips).enter().append("div").attr("class",t=>t[1]==e.selectedValue?"button listbox-item selected":"button listbox-item").on("click",t=>{e.selectedValue=t[1],e.base.div.selectAll("div.listbox-item").attr("class",t=>t[1]==e.selectedValue?"button listbox-item selected":"button listbox-item"),e.onSelect(t[1])}).append("div").attr("class","button-text").html(e=>e[0]),r.setTooltips(e.base.viewer,e.base.div.selectAll("div.listbox-item"),e.namesValuesTooltips.map(e=>e[2]),!1,!0),r.setTooltips(e.base.viewer,e.base.div,[e.base.tooltip],!1,!0)})(s,e)},namesValuesTooltips:n,selectedValue:i,onSelect:l};return s}function m(e,t,n,i,l,a,r,s,c,d,h){let u={base:{viewer:e,id:t,children:[],div:o(),tooltip:h,show:e=>f(u,e)},minValue:n,maxValue:i,step:l,selectedValue:a,minValueLabel:null!==r&&void 0!==r?r:n.toString(),maxValueLabel:null!==s&&void 0!==s?s:i.toString(),onMove:c,onRelease:d};return u}function f(t,o){t.base.div=o.append("div").attr("class","slider").attr("id",t.base.id);let n=t.base.div.append("div").attr("class","slider-left-value").text(t.minValueLabel),i=t.base.div.append("div").attr("class","slider-right-value").text(t.maxValueLabel),l=t.base.div.append("div").attr("class","slider-main"),a=l.append("div").attr("class","slider-rail-ruler");a.append("div").attr("class","slider-rail");let s=a.append("div").attr("class","slider-rail-clickable"),c=a.append("div").attr("class","slider-handle-ruler"),d=c.append("div").attr("class","slider-handle"),h=E(t,t.selectedValue);c.style("left",100*h+"%"),r.setTooltips(t.base.viewer,l,[t.base.tooltip],!1,!0),r.setTooltips(t.base.viewer,n,["Click/hold to decrease value."],!1,!0),r.setTooltips(t.base.viewer,i,["Click/hold to increase value."],!1,!0);let u=e.drag().on("start.slider",()=>M(t,e.event.sourceEvent)).on("drag.slider",()=>M(t,e.event.sourceEvent)).on("end.slider",()=>(function(e,t){let o=w(e,t);if(null!==o){let t=_(e,o);t=T(e,t),o=E(e,t),e.base.div.select("div.slider-handle-ruler").style("left",100*o+"%"),e.selectedValue=t,e.onRelease(t)}})(t,e.event.sourceEvent));u(s),u(d),r.addMouseHoldBehavior(n,()=>g(t,-1),()=>g(t,-1),()=>{}),r.addMouseHoldBehavior(i,()=>g(t,1),()=>g(t,1),()=>{})}function g(e,t){let o=i.constrain(e.selectedValue+t*e.step,e.minValue,e.maxValue),n=E(e,o);e.base.div.select("div.slider-handle-ruler").style("left",100*n+"%"),e.selectedValue=o,e.onMove(o),e.onRelease(o)}function E(e,t){let o=(t-e.minValue)/(e.maxValue-e.minValue);return o=i.constrain(o,0,1)}function _(e,t){return e.minValue+t*(e.maxValue-e.minValue)}function T(e,t){let o=Math.round((t-e.minValue)/e.step);return e.minValue+o*e.step}function w(e,t){let o=e.base.div.selectAll("div.slider-rail-ruler").node();if(null!==o){let{x:e,width:n}=o.getBoundingClientRect(),l=(t.clientX-e)/n;return l=i.constrain(l,0,1)}return null}function M(e,t){let o=w(e,t);if(null!==o){let t=_(e,o);o=E(e,t=T(e,t)),e.base.div.select("div.slider-handle-ruler").style("left",100*o+"%"),e.onMove(t)}}t.newControlPanel=function(e,t,n){let i={base:{viewer:e,id:t,children:[],div:o(),tooltip:n,show:e=>(function(e,t){e.base.div=t.append("div").attr("class","control-panel").attr("id",e.base.id),e.base.children.forEach(t=>t.base.show(e.base.div))})(i,e)}};return i},t.addToControlPanel=function(e,t){e.base.children.push(t)},t.newButton=l,t.changeButtonText=s,t.newPopup=c,t.addToPopup=d,t.newListbox=v,t.newDropdownList=function(e,t,o,n,i,l,a,r=!0,s=!0){let u=c(e,t,o,r,a),p=v(e,t,n,i,s?e=>{h(u),l(e)}:l,null);return d(u,p),u},t.newSlider=m,t.showSlider=f,t.newPopupSlider=function(e,t,o,n,i,l,a,r,s,h,u,v,f,g=!0){let E=c(e,t,o+r+n,g,f),_=m(e,t,i,l,a,r,s,h,e=>{p(E,o+e+n),u(e)},e=>{p(E,o+e+n),v(e)},null);return d(E,_),E}}(s||(s={}));var d,h=function(e,t,o,n){return new(o||(o=Promise))(function(i,l){function a(e){try{s(n.next(e))}catch(e){l(e)}}function r(e){try{s(n.throw(e))}catch(e){l(e)}}function s(e){var t;e.done?i(e.value):(t=e.value,t instanceof o?t:new o(function(e){e(t)})).then(a,r)}s((n=n.apply(e,t||[])).next())})};!function(c){function d(e,t){e.data=t,l.filterDagAndAddLevels(e.data,e.settings.occurrenceThreshold),u(e)}function u(t){if(t.canvas.selectAll("*").remove(),null!==t.data.error)return void t.canvas.append("text").attr("class","central-message").attrs({x:t.screen.width/2,y:t.screen.height/2}).text("Error: "+t.data.error);if(0==t.data.activeNodes.length)return void t.canvas.append("text").attr("class","central-message").attrs({x:t.screen.width/2,y:t.screen.height/2}).text("No secondary structure elements");let a=t.data,s=t.settings.shapeMethod==o.ShapeMethod.SymCdf?a.nodes.map(e=>e.cdf[e.cdf.length-1][0]*n.LENGTH_SCALE):a.nodes.map(e=>e.avg_length*n.LENGTH_SCALE),c=a.nodes.map(e=>e.occurrence*n.OCCURRENCE_SCALE),d=a.nodes.length,h=a.levels.length,u=new Array(d),m=new Array(d),f=new Array(d).fill(0),g=0;for(let e=0;e<h;e++){const t=a.levels[e];let o=t.length;for(let e=0;e<o;e++){const n=t[e];u[n]=g,m[n]=g+s[n],f[n]=e-(o-1)/2}g=Math.max(...t.map(e=>m[e]))+n.GAP_LENGTH}for(let e=0;e<a.nodes.length;e++)a.nodes[e].visual=l.newNodeVisual(),a.nodes[e].active?a.nodes[e].visual.rect={x:u[e],width:s[e],y:f[e]*n.FLOOR_HEIGHT-c[e]/2,height:c[e]}:a.nodes[e].visual.rect={x:-n.LEFT_MARGIN,width:0,y:0,height:0};let E=g-n.GAP_LENGTH,_=Math.min(...f),T=Math.max(...f),w=-n.LEFT_MARGIN,M=E+n.RIGHT_MARGIN,A=_*n.FLOOR_HEIGHT-.5*n.OCCURRENCE_SCALE-n.TOP_MARGIN,y=T*n.FLOOR_HEIGHT+.5*n.OCCURRENCE_SCALE+n.BOTTOM_MARGIN;t.world={x:w,y:A,width:M-w,height:y-A};let O=i.zoomAllZoomout(t.world,t.screen),b=(n.OCCURRENCE_SCALE+n.TOP_MARGIN+n.BOTTOM_MARGIN)/t.screen.height,S=t.world.height/t.screen.height,C=b/10,R=O*n.MAX_X_ZOOMOUT;t.zoom=i.newZoomInfo(C,R,b,S,O),t.visWorld=i.centeredVisWorld(t.world,t.screen,t.zoom),a.precedenceLines=[],a.precedence.forEach(e=>{let t=a.nodes[e[0]].visual.rect,o=a.nodes[e[1]].visual.rect,i=t.x+t.width,l=t.y+t.height/2,r=o.x,s=o.y+o.height/2;a.precedenceLines.push({x1:i,y1:l,x2:i+n.KNOB_LENGTH,y2:l}),a.precedenceLines.push({x1:i+n.KNOB_LENGTH,y1:l,x2:r-n.KNOB_LENGTH,y2:s}),a.precedenceLines.push({x1:r-n.KNOB_LENGTH,y1:s,x2:r,y2:s})});let L,x=t.canvas.append("g").attr("class","nodes").selectAll("g.node").data(a.nodes).enter().append("g").attr("class","node").attr("opacity",e=>e.active?1:0);(L=t.settings.shapeMethod==o.ShapeMethod.SymCdf?x.append("polygon"):x.append("rect")).filter(e=>e.active);r.addPointBehavior(L,t=>e.select(t.parentElement)),r.addPickBehavior(t,L,t=>e.select(t.parentElement)),r.setTooltips(t,L,x.data().map(p),!0,!1),x.append("text").attr("class","node-label").style("opacity",e=>r.nodeBigEnoughForLabel(t,e)?1:0).text(e=>e.label),t.canvas.append("g").attr("class","edges").selectAll().data(a.precedenceLines).enter().append("line").attr("stroke",n.EDGE_COLOR),r.showBetaConnectivity(t,t.settings.betaConnectivityVisibility,!1),v(t,t.settings.colorMethod,!1),r.zoomAll(t),r.redraw(t,!1)}function p(e){if(e.active){let[t,o]=l.getNodeMinMaxLength(e);return['<div class="node-tooltip">',`<span class="tooltip-title">${e.label}</span>`,"<table>",`<tr><td>Type:</td><td>${"e"==e.type?"Strand":"Helix"}</td></tr>`,`<tr><td>Occurrence:</td><td>${i.round(100*e.occurrence,1)}%</td></tr>`,`<tr><td>Min. length:</td><td>${t} residues</td></tr>`,`<tr><td>Avg. length:</td><td>${i.round(e.avg_length,2)} residues</td></tr>`,`<tr><td>Max. length:</td><td>${o} residues</td></tr>`,`<tr><td>3D variability:</td><td>${i.round(e.stdev3d,2)} &#8491;</td></tr>`,"e"==e.type?`<tr><td>Sheet:</td><td>${e.sheet_id}</td></tr>`:"","</table>","</div>"].join("")}return null}function v(e,i,l=!0){e.settings.colorMethod=i,e.data.nodes.forEach((e,l)=>{let a;switch(i){case o.ColorMethod.Uniform:a=t.NEUTRAL_COLOR;break;case o.ColorMethod.Type:a=t.bySseType(e.type);break;case o.ColorMethod.Sheet:a=t.byIndex1(e.sheet_id);break;case o.ColorMethod.Stdev:a=t.byExpHeatmap(e.stdev3d,n.HEATMAP_MIDDLE_VALUE)}e.visual.fill=a.hex(),e.visual.stroke=a.darker().hex()}),r.recolor(e,l)}c.initializeViewer=function(t){var c;let p=a.newSettingsFromHTMLElement(t),m=`${t.id||""}-${Math.random().toString(36).slice(2)}`;e.select(t).selectAll(":scope > *").remove();let f=e.select(t).append("div").attr("class","overprot-viewer").attr("id","overprot-viewer-"+m),g=f.append("div").attr("class","gui").styles({width:p.width,height:p.height}),E=null===(c=g.node())||void 0===c?void 0:c.getBoundingClientRect();if(void 0!==E){let{width:e,height:t}=E;p.width=e,p.height=t}let _=g.append("div").attr("class","canvas").append("svg").attr("class","canvas").attrs({width:p.width,height:p.height}),T=a.newViewer(f,g,_,p);if(function(e){let t=e.guiDiv.append("div").attr("class","internal-controls"),i=[["Uniform",o.ColorMethod.Uniform,"Show all SSEs in the same color."],["Type",o.ColorMethod.Type,"Show &beta;-strands in blue, helices in gray."],["Sheet",o.ColorMethod.Sheet,"Assign the same color to &beta;-strands from the same &beta;-sheet, <br>show helices in gray."],["Variability",o.ColorMethod.Stdev,"<strong>3D variability</strong> measures the standard deviation of the SSE end point coordinates.<br>Low values (dark) indicate conserved SSE position, <br>high values (bright) indicate variable SSE position."]],a=[["Rectangle",o.ShapeMethod.Rectangle,"Show SSEs as rectangles. <br>Height of the rectangle indicates <strong>occurrence</strong> (what percentage of structures contain this SSE), <br>width indicates <strong>average length</strong> (number of residues)."],["SymCDF",o.ShapeMethod.SymCdf,"<strong>Cumulative distribution function</strong> describes the statistical distribution of the SSE length. <br>The widest part of the shape corresponds to maximum length, the narrowest to minimum length, <br> the height corresponds to occurrence. <br>(The SymCDF shape consists of four symmetrical copies of the CDF, the bottom right quarter is the classical CDF.)"]],c=s.newControlPanel(e,"main-panel",null),h=s.newButton(e,"zoom-in","+",!0,()=>r.zoomIn(e),"Zoom in. <br>Tip: Use Ctrl + mouse wheel to zoom.");s.addToControlPanel(c,h);let p=s.newButton(e,"zoom-out","-",!0,()=>r.zoomOut(e),"Zoom out. <br>Tip: Use Ctrl + mouse wheel to zoom.");s.addToControlPanel(c,p);let m=s.newButton(e,"zoom-reset",n.RESET_SYMBOL,!0,()=>r.zoomAll(e),"Reset zoom. <br>Tip: Use double click to reset zoom.");s.addToControlPanel(c,m);let f=s.newDropdownList(e,"color-method","Color",i,e.settings.colorMethod,t=>v(e,t),"Choose coloring method.",!0,!1);s.addToControlPanel(c,f);let g=s.newDropdownList(e,"shape-method","Shape",a,e.settings.shapeMethod,t=>(function(e,t){e.settings.shapeMethod=t,d(e,e.data)})(e,t),"Choose shape method.",!0,!1);s.addToControlPanel(c,g);let E=s.newDropdownList(e,"beta-connectivity","Beta-connectivity",[["On",!0,null],["Off",!1,null]],e.settings.betaConnectivityVisibility,t=>r.showBetaConnectivity(e,t,!0),"<strong>Beta-connectivity</strong> shows how &beta;-strands are connected to each other in &beta;-sheets.<br>Upper arcs indicate antiparallel connections,<br>lower arcs indicate parallel connections.",!0,!1);s.addToControlPanel(c,E);let _=s.newPopupSlider(e,"occurrence-threshold","Occurrence threshold: ","%",0,100,1,100*e.settings.occurrenceThreshold,"0%","100%",e=>{},t=>(function(e,t){e.settings.occurrenceThreshold=t,l.filterDagAndAddLevels(e.data,t),u(e)})(e,t/100),"Hide SSEs with occurrence lower than the specified threshold.");s.addToControlPanel(c,_),c.base.show(t)}(T),f.append("br"),_.on("dblclick",()=>r.zoomAll(T)),_.on("wheel",()=>{if(e.event.ctrlKey){let t=e.event.deltaY>0?n.ZOOM_STEP_RATIO_MOUSE:1/n.ZOOM_STEP_RATIO_MOUSE;r.zoomOut(T,t,e.mouse(_.node())),e.event.preventDefault()}else{let e=T.canvas.selectAll("text.temporary-central-message").data([1]).enter().append("rect").attr("class","temporary-central-message-background").attrs({x:0,width:T.screen.width,y:0,height:T.screen.height}),t=T.canvas.selectAll("text.temporary-central-message").data([1]).enter().append("text").attr("class","temporary-central-message").attrs({x:T.screen.width/2,y:T.screen.height/2}).text("Use Ctrl + scroll to zoom");r.fadeIn(e),r.fadeIn(t),r.fadeOutRemove(e,n.TEMPORARY_CENTRAL_MESSAGE_TIMEOUT),r.fadeOutRemove(t,n.TEMPORARY_CENTRAL_MESSAGE_TIMEOUT)}}),e.drag().on("drag",()=>r.shiftByMouse(T,-e.event.dx,-e.event.dy))(_),e.select(window).on("resize."+m,()=>{let e=g.node().getBoundingClientRect();!function(e,t,o){let n=e.zoom.zoomout!=e.zoom.initialZoomout,l=e.zoom.zoomout,a=e.visWorld,s=l*e.screen.width/t;e.canvas.attr("width",t).attr("height",o),e.screen.width=t,e.screen.height=o,u(e),n&&r.zoomSet(e,s,i.rectangleCenter(a))}(T,e.width,e.height)}),T.canvas.append("text").attr("class","central-message").attrs({x:T.screen.width/2,y:T.screen.height/2}).text("Loading..."),""!=p.file){let e=new URL(p.file,document.baseURI).toString();console.log(`Fetching ${e}`),fetch(e,{mode:"no-cors"}).then(t=>h(this,void 0,void 0,function*(){if(t.ok){let e=yield t.text(),o=l.dagFromJson(e);d(T,o)}else{let t=l.newDagWithError(`Failed to fetch data from "${e}"`);d(T,t)}}))}else{let e=l.newDagWithError("No file specified");d(T,e)}}}(d||(d={})),function(e){window.customElements.define("overprot-viewer",class extends HTMLElement{constructor(){super()}connectedCallback(){this.initialize()}initialize(){return d.initializeViewer(this)}})}()}(d3);