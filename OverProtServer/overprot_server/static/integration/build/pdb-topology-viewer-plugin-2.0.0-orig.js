/**
 * pdb-topology-viewer
 * @version 2.0.0
 * @link https://github.com/PDBeurope/pdb-topology-viewer
 * @license Apache 2.0
 */
/**
 * Copyright 2020-2021 Mandar Deshpande <mandar@ebi.ac.uk>
 * European Bioinformatics Institute (EBI, http://www.ebi.ac.uk/)
 * European Molecular Biology Laboratory (EMBL, http://www.embl.de/)
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at 
 * http://www.apache.org/licenses/LICENSE-2.0
 * 
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, 
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and 
 * limitations under the License.
 */
!function(){"use strict";"SVGPathSeg"in window||(window.SVGPathSeg=function(t,e,i){this.pathSegType=t,this.pathSegTypeAsLetter=e,this._owningPathSegList=i},window.SVGPathSeg.prototype.classname="SVGPathSeg",window.SVGPathSeg.PATHSEG_UNKNOWN=0,window.SVGPathSeg.PATHSEG_CLOSEPATH=1,window.SVGPathSeg.PATHSEG_MOVETO_ABS=2,window.SVGPathSeg.PATHSEG_MOVETO_REL=3,window.SVGPathSeg.PATHSEG_LINETO_ABS=4,window.SVGPathSeg.PATHSEG_LINETO_REL=5,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS=6,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL=7,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS=8,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL=9,window.SVGPathSeg.PATHSEG_ARC_ABS=10,window.SVGPathSeg.PATHSEG_ARC_REL=11,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS=12,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL=13,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS=14,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL=15,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS=16,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL=17,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS=18,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL=19,window.SVGPathSeg.prototype._segmentChanged=function(){this._owningPathSegList&&this._owningPathSegList.segmentChanged(this)},window.SVGPathSegClosePath=function(t){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CLOSEPATH,"z",t)},window.SVGPathSegClosePath.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegClosePath.prototype.toString=function(){return"[object SVGPathSegClosePath]"},window.SVGPathSegClosePath.prototype._asPathString=function(){return this.pathSegTypeAsLetter},window.SVGPathSegClosePath.prototype.clone=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathSegMovetoAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_ABS,"M",t),this._x=e,this._y=i},window.SVGPathSegMovetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoAbs.prototype.toString=function(){return"[object SVGPathSegMovetoAbs]"},window.SVGPathSegMovetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoAbs.prototype.clone=function(){return new window.SVGPathSegMovetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegMovetoRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_MOVETO_REL,"m",t),this._x=e,this._y=i},window.SVGPathSegMovetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegMovetoRel.prototype.toString=function(){return"[object SVGPathSegMovetoRel]"},window.SVGPathSegMovetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegMovetoRel.prototype.clone=function(){return new window.SVGPathSegMovetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegMovetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_ABS,"L",t),this._x=e,this._y=i},window.SVGPathSegLinetoAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoAbs.prototype.toString=function(){return"[object SVGPathSegLinetoAbs]"},window.SVGPathSegLinetoAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoAbs.prototype.clone=function(){return new window.SVGPathSegLinetoAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_REL,"l",t),this._x=e,this._y=i},window.SVGPathSegLinetoRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoRel.prototype.toString=function(){return"[object SVGPathSegLinetoRel]"},window.SVGPathSegLinetoRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegLinetoRel.prototype.clone=function(){return new window.SVGPathSegLinetoRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegLinetoRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicAbs=function(t,e,i,n,o,r,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS,"C",t),this._x=e,this._y=i,this._x1=n,this._y1=o,this._x2=r,this._y2=s},window.SVGPathSegCurvetoCubicAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicAbs]"},window.SVGPathSegCurvetoCubicAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicAbs(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicRel=function(t,e,i,n,o,r,s){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL,"c",t),this._x=e,this._y=i,this._x1=n,this._y1=o,this._x2=r,this._y2=s},window.SVGPathSegCurvetoCubicRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicRel]"},window.SVGPathSegCurvetoCubicRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicRel(void 0,this._x,this._y,this._x1,this._y1,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticAbs=function(t,e,i,n,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS,"Q",t),this._x=e,this._y=i,this._x1=n,this._y1=o},window.SVGPathSegCurvetoQuadraticAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticAbs]"},window.SVGPathSegCurvetoQuadraticAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticAbs.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticRel=function(t,e,i,n,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL,"q",t),this._x=e,this._y=i,this._x1=n,this._y1=o},window.SVGPathSegCurvetoQuadraticRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticRel]"},window.SVGPathSegCurvetoQuadraticRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x1+" "+this._y1+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticRel(void 0,this._x,this._y,this._x1,this._y1)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"x1",{get:function(){return this._x1},set:function(t){this._x1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticRel.prototype,"y1",{get:function(){return this._y1},set:function(t){this._y1=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcAbs=function(t,e,i,n,o,r,s,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_ABS,"A",t),this._x=e,this._y=i,this._r1=n,this._r2=o,this._angle=r,this._largeArcFlag=s,this._sweepFlag=a},window.SVGPathSegArcAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcAbs.prototype.toString=function(){return"[object SVGPathSegArcAbs]"},window.SVGPathSegArcAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcAbs.prototype.clone=function(){return new window.SVGPathSegArcAbs(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcAbs.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegArcRel=function(t,e,i,n,o,r,s,a){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_ARC_REL,"a",t),this._x=e,this._y=i,this._r1=n,this._r2=o,this._angle=r,this._largeArcFlag=s,this._sweepFlag=a},window.SVGPathSegArcRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegArcRel.prototype.toString=function(){return"[object SVGPathSegArcRel]"},window.SVGPathSegArcRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._r1+" "+this._r2+" "+this._angle+" "+(this._largeArcFlag?"1":"0")+" "+(this._sweepFlag?"1":"0")+" "+this._x+" "+this._y},window.SVGPathSegArcRel.prototype.clone=function(){return new window.SVGPathSegArcRel(void 0,this._x,this._y,this._r1,this._r2,this._angle,this._largeArcFlag,this._sweepFlag)},Object.defineProperty(window.SVGPathSegArcRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r1",{get:function(){return this._r1},set:function(t){this._r1=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"r2",{get:function(){return this._r2},set:function(t){this._r2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"angle",{get:function(){return this._angle},set:function(t){this._angle=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"largeArcFlag",{get:function(){return this._largeArcFlag},set:function(t){this._largeArcFlag=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegArcRel.prototype,"sweepFlag",{get:function(){return this._sweepFlag},set:function(t){this._sweepFlag=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS,"H",t),this._x=e},window.SVGPathSegLinetoHorizontalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalAbs]"},window.SVGPathSegLinetoHorizontalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalAbs(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoHorizontalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL,"h",t),this._x=e},window.SVGPathSegLinetoHorizontalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoHorizontalRel.prototype.toString=function(){return"[object SVGPathSegLinetoHorizontalRel]"},window.SVGPathSegLinetoHorizontalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x},window.SVGPathSegLinetoHorizontalRel.prototype.clone=function(){return new window.SVGPathSegLinetoHorizontalRel(void 0,this._x)},Object.defineProperty(window.SVGPathSegLinetoHorizontalRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalAbs=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS,"V",t),this._y=e},window.SVGPathSegLinetoVerticalAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalAbs.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalAbs]"},window.SVGPathSegLinetoVerticalAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalAbs.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalAbs(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegLinetoVerticalRel=function(t,e){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL,"v",t),this._y=e},window.SVGPathSegLinetoVerticalRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegLinetoVerticalRel.prototype.toString=function(){return"[object SVGPathSegLinetoVerticalRel]"},window.SVGPathSegLinetoVerticalRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._y},window.SVGPathSegLinetoVerticalRel.prototype.clone=function(){return new window.SVGPathSegLinetoVerticalRel(void 0,this._y)},Object.defineProperty(window.SVGPathSegLinetoVerticalRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothAbs=function(t,e,i,n,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS,"S",t),this._x=e,this._y=i,this._x2=n,this._y2=o},window.SVGPathSegCurvetoCubicSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothAbs]"},window.SVGPathSegCurvetoCubicSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothAbs.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoCubicSmoothRel=function(t,e,i,n,o){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL,"s",t),this._x=e,this._y=i,this._x2=n,this._y2=o},window.SVGPathSegCurvetoCubicSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoCubicSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoCubicSmoothRel]"},window.SVGPathSegCurvetoCubicSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x2+" "+this._y2+" "+this._x+" "+this._y},window.SVGPathSegCurvetoCubicSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,this._x,this._y,this._x2,this._y2)},Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"x2",{get:function(){return this._x2},set:function(t){this._x2=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoCubicSmoothRel.prototype,"y2",{get:function(){return this._y2},set:function(t){this._y2=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothAbs=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS,"T",t),this._x=e,this._y=i},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothAbs]"},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothAbs.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathSegCurvetoQuadraticSmoothRel=function(t,e,i){window.SVGPathSeg.call(this,window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL,"t",t),this._x=e,this._y=i},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype=Object.create(window.SVGPathSeg.prototype),window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.toString=function(){return"[object SVGPathSegCurvetoQuadraticSmoothRel]"},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype._asPathString=function(){return this.pathSegTypeAsLetter+" "+this._x+" "+this._y},window.SVGPathSegCurvetoQuadraticSmoothRel.prototype.clone=function(){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,this._x,this._y)},Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"x",{get:function(){return this._x},set:function(t){this._x=t,this._segmentChanged()},enumerable:!0}),Object.defineProperty(window.SVGPathSegCurvetoQuadraticSmoothRel.prototype,"y",{get:function(){return this._y},set:function(t){this._y=t,this._segmentChanged()},enumerable:!0}),window.SVGPathElement.prototype.createSVGPathSegClosePath=function(){return new window.SVGPathSegClosePath(void 0)},window.SVGPathElement.prototype.createSVGPathSegMovetoAbs=function(t,e){return new window.SVGPathSegMovetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegMovetoRel=function(t,e){return new window.SVGPathSegMovetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoAbs=function(t,e){return new window.SVGPathSegLinetoAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegLinetoRel=function(t,e){return new window.SVGPathSegLinetoRel(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicAbs=function(t,e,i,n,o,r){return new window.SVGPathSegCurvetoCubicAbs(void 0,t,e,i,n,o,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicRel=function(t,e,i,n,o,r){return new window.SVGPathSegCurvetoCubicRel(void 0,t,e,i,n,o,r)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticAbs=function(t,e,i,n){return new window.SVGPathSegCurvetoQuadraticAbs(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticRel=function(t,e,i,n){return new window.SVGPathSegCurvetoQuadraticRel(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegArcAbs=function(t,e,i,n,o,r,s){return new window.SVGPathSegArcAbs(void 0,t,e,i,n,o,r,s)},window.SVGPathElement.prototype.createSVGPathSegArcRel=function(t,e,i,n,o,r,s){return new window.SVGPathSegArcRel(void 0,t,e,i,n,o,r,s)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalAbs=function(t){return new window.SVGPathSegLinetoHorizontalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoHorizontalRel=function(t){return new window.SVGPathSegLinetoHorizontalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalAbs=function(t){return new window.SVGPathSegLinetoVerticalAbs(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegLinetoVerticalRel=function(t){return new window.SVGPathSegLinetoVerticalRel(void 0,t)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothAbs=function(t,e,i,n){return new window.SVGPathSegCurvetoCubicSmoothAbs(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoCubicSmoothRel=function(t,e,i,n){return new window.SVGPathSegCurvetoCubicSmoothRel(void 0,t,e,i,n)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothAbs=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothAbs(void 0,t,e)},window.SVGPathElement.prototype.createSVGPathSegCurvetoQuadraticSmoothRel=function(t,e){return new window.SVGPathSegCurvetoQuadraticSmoothRel(void 0,t,e)},"getPathSegAtLength"in window.SVGPathElement.prototype||(window.SVGPathElement.prototype.getPathSegAtLength=function(t){if(void 0===t||!isFinite(t))throw"Invalid arguments.";var e=document.createElementNS("http://www.w3.org/2000/svg","path");e.setAttribute("d",this.getAttribute("d"));var i=e.pathSegList.numberOfItems-1;if(i<=0)return 0;do{if(e.pathSegList.removeItem(i),t>e.getTotalLength())break;i--}while(0<i);return i})),"SVGPathSegList"in window&&"appendItem"in window.SVGPathSegList.prototype||(window.SVGPathSegList=function(t){this._pathElement=t,this._list=this._parsePath(this._pathElement.getAttribute("d")),this._mutationObserverConfig={attributes:!0,attributeFilter:["d"]},this._pathElementMutationObserver=new MutationObserver(this._updateListFromPathMutations.bind(this)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.classname="SVGPathSegList",Object.defineProperty(window.SVGPathSegList.prototype,"numberOfItems",{get:function(){return this._checkPathSynchronizedToList(),this._list.length},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"pathSegList",{get:function(){return this._pathSegList||(this._pathSegList=new window.SVGPathSegList(this)),this._pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"normalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),Object.defineProperty(window.SVGPathElement.prototype,"animatedNormalizedPathSegList",{get:function(){return this.pathSegList},enumerable:!0}),window.SVGPathSegList.prototype._checkPathSynchronizedToList=function(){this._updateListFromPathMutations(this._pathElementMutationObserver.takeRecords())},window.SVGPathSegList.prototype._updateListFromPathMutations=function(t){if(this._pathElement){var e=!1;t.forEach(function(t){"d"==t.attributeName&&(e=!0)}),e&&(this._list=this._parsePath(this._pathElement.getAttribute("d")))}},window.SVGPathSegList.prototype._writeListToPath=function(){this._pathElementMutationObserver.disconnect(),this._pathElement.setAttribute("d",window.SVGPathSegList._pathSegArrayAsString(this._list)),this._pathElementMutationObserver.observe(this._pathElement,this._mutationObserverConfig)},window.SVGPathSegList.prototype.segmentChanged=function(t){this._writeListToPath()},window.SVGPathSegList.prototype.clear=function(){this._checkPathSynchronizedToList(),this._list.forEach(function(t){t._owningPathSegList=null}),this._list=[],this._writeListToPath()},window.SVGPathSegList.prototype.initialize=function(t){return this._checkPathSynchronizedToList(),this._list=[t],(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype._checkValidIndex=function(t){if(isNaN(t)||t<0||t>=this.numberOfItems)throw"INDEX_SIZE_ERR"},window.SVGPathSegList.prototype.getItem=function(t){return this._checkPathSynchronizedToList(),this._checkValidIndex(t),this._list[t]},window.SVGPathSegList.prototype.insertItemBefore=function(t,e){return this._checkPathSynchronizedToList(),e>this.numberOfItems&&(e=this.numberOfItems),t._owningPathSegList&&(t=t.clone()),this._list.splice(e,0,t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.replaceItem=function(t,e){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._checkValidIndex(e),((this._list[e]=t)._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList.prototype.removeItem=function(t){this._checkPathSynchronizedToList(),this._checkValidIndex(t);var e=this._list[t];return this._list.splice(t,1),this._writeListToPath(),e},window.SVGPathSegList.prototype.appendItem=function(t){return this._checkPathSynchronizedToList(),t._owningPathSegList&&(t=t.clone()),this._list.push(t),(t._owningPathSegList=this)._writeListToPath(),t},window.SVGPathSegList._pathSegArrayAsString=function(t){var e="",i=!0;return t.forEach(function(t){i?(i=!1,e+=t._asPathString()):e+=" "+t._asPathString()}),e},window.SVGPathSegList.prototype._parsePath=function(t){if(!t||0==t.length)return[];function e(){this.pathSegList=[]}var n=this;e.prototype.appendSegment=function(t){this.pathSegList.push(t)};function i(t){this._string=t,this._currentIndex=0,this._endIndex=this._string.length,this._previousCommand=window.SVGPathSeg.PATHSEG_UNKNOWN,this._skipOptionalSpaces()}i.prototype._isCurrentSpace=function(){var t=this._string[this._currentIndex];return t<=" "&&(" "==t||"\n"==t||"\t"==t||"\r"==t||"\f"==t)},i.prototype._skipOptionalSpaces=function(){for(;this._currentIndex<this._endIndex&&this._isCurrentSpace();)this._currentIndex++;return this._currentIndex<this._endIndex},i.prototype._skipOptionalSpacesOrDelimiter=function(){return!(this._currentIndex<this._endIndex&&!this._isCurrentSpace()&&","!=this._string.charAt(this._currentIndex))&&(this._skipOptionalSpaces()&&this._currentIndex<this._endIndex&&","==this._string.charAt(this._currentIndex)&&(this._currentIndex++,this._skipOptionalSpaces()),this._currentIndex<this._endIndex)},i.prototype.hasMoreData=function(){return this._currentIndex<this._endIndex},i.prototype.peekSegmentType=function(){var t=this._string[this._currentIndex];return this._pathSegTypeFromChar(t)},i.prototype._pathSegTypeFromChar=function(t){switch(t){case"Z":case"z":return window.SVGPathSeg.PATHSEG_CLOSEPATH;case"M":return window.SVGPathSeg.PATHSEG_MOVETO_ABS;case"m":return window.SVGPathSeg.PATHSEG_MOVETO_REL;case"L":return window.SVGPathSeg.PATHSEG_LINETO_ABS;case"l":return window.SVGPathSeg.PATHSEG_LINETO_REL;case"C":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS;case"c":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL;case"Q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS;case"q":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL;case"A":return window.SVGPathSeg.PATHSEG_ARC_ABS;case"a":return window.SVGPathSeg.PATHSEG_ARC_REL;case"H":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS;case"h":return window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL;case"V":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS;case"v":return window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL;case"S":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS;case"s":return window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL;case"T":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS;case"t":return window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL;default:return window.SVGPathSeg.PATHSEG_UNKNOWN}},i.prototype._nextCommandHelper=function(t,e){return("+"==t||"-"==t||"."==t||"0"<=t&&t<="9")&&e!=window.SVGPathSeg.PATHSEG_CLOSEPATH?e==window.SVGPathSeg.PATHSEG_MOVETO_ABS?window.SVGPathSeg.PATHSEG_LINETO_ABS:e==window.SVGPathSeg.PATHSEG_MOVETO_REL?window.SVGPathSeg.PATHSEG_LINETO_REL:e:window.SVGPathSeg.PATHSEG_UNKNOWN},i.prototype.initialCommandIsMoveTo=function(){if(!this.hasMoreData())return!0;var t=this.peekSegmentType();return t==window.SVGPathSeg.PATHSEG_MOVETO_ABS||t==window.SVGPathSeg.PATHSEG_MOVETO_REL},i.prototype._parseNumber=function(){var t=0,e=0,i=1,n=0,o=1,r=1,s=this._currentIndex;if(this._skipOptionalSpaces(),this._currentIndex<this._endIndex&&"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:this._currentIndex<this._endIndex&&"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,o=-1),!(this._currentIndex==this._endIndex||(this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))&&"."!=this._string.charAt(this._currentIndex))){for(var a=this._currentIndex;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)this._currentIndex++;if(this._currentIndex!=a)for(var h=this._currentIndex-1,d=1;a<=h;)e+=d*(this._string.charAt(h--)-"0"),d*=10;if(this._currentIndex<this._endIndex&&"."==this._string.charAt(this._currentIndex)){if(this._currentIndex++,this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)i*=10,n+=(this._string.charAt(this._currentIndex)-"0")/i,this._currentIndex+=1}if(this._currentIndex!=s&&this._currentIndex+1<this._endIndex&&("e"==this._string.charAt(this._currentIndex)||"E"==this._string.charAt(this._currentIndex))&&"x"!=this._string.charAt(this._currentIndex+1)&&"m"!=this._string.charAt(this._currentIndex+1)){if(this._currentIndex++,"+"==this._string.charAt(this._currentIndex)?this._currentIndex++:"-"==this._string.charAt(this._currentIndex)&&(this._currentIndex++,r=-1),this._currentIndex>=this._endIndex||this._string.charAt(this._currentIndex)<"0"||"9"<this._string.charAt(this._currentIndex))return;for(;this._currentIndex<this._endIndex&&"0"<=this._string.charAt(this._currentIndex)&&this._string.charAt(this._currentIndex)<="9";)t*=10,t+=this._string.charAt(this._currentIndex)-"0",this._currentIndex++}var c=e+n;if(c*=o,t&&(c*=Math.pow(10,r*t)),s!=this._currentIndex)return this._skipOptionalSpacesOrDelimiter(),c}},i.prototype._parseArcFlag=function(){if(!(this._currentIndex>=this._endIndex)){var t=!1,e=this._string.charAt(this._currentIndex++);if("0"==e)t=!1;else{if("1"!=e)return;t=!0}return this._skipOptionalSpacesOrDelimiter(),t}},i.prototype.parseSegment=function(){var t=this._string[this._currentIndex],e=this._pathSegTypeFromChar(t);if(e==window.SVGPathSeg.PATHSEG_UNKNOWN){if(this._previousCommand==window.SVGPathSeg.PATHSEG_UNKNOWN)return null;if((e=this._nextCommandHelper(t,this._previousCommand))==window.SVGPathSeg.PATHSEG_UNKNOWN)return null}else this._currentIndex++;switch(this._previousCommand=e){case window.SVGPathSeg.PATHSEG_MOVETO_REL:return new window.SVGPathSegMovetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_MOVETO_ABS:return new window.SVGPathSegMovetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_REL:return new window.SVGPathSegLinetoRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_ABS:return new window.SVGPathSegLinetoAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_REL:return new window.SVGPathSegLinetoHorizontalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_HORIZONTAL_ABS:return new window.SVGPathSegLinetoHorizontalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_REL:return new window.SVGPathSegLinetoVerticalRel(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_LINETO_VERTICAL_ABS:return new window.SVGPathSegLinetoVerticalAbs(n,this._parseNumber());case window.SVGPathSeg.PATHSEG_CLOSEPATH:return this._skipOptionalSpaces(),new window.SVGPathSegClosePath(n);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_REL:var i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicRel(n,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_ABS:i={x1:this._parseNumber(),y1:this._parseNumber(),x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicAbs(n,i.x,i.y,i.x1,i.y1,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_REL:i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothRel(n,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_CUBIC_SMOOTH_ABS:i={x2:this._parseNumber(),y2:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoCubicSmoothAbs(n,i.x,i.y,i.x2,i.y2);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_REL:i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticRel(n,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_ABS:i={x1:this._parseNumber(),y1:this._parseNumber(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegCurvetoQuadraticAbs(n,i.x,i.y,i.x1,i.y1);case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_REL:return new window.SVGPathSegCurvetoQuadraticSmoothRel(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_CURVETO_QUADRATIC_SMOOTH_ABS:return new window.SVGPathSegCurvetoQuadraticSmoothAbs(n,this._parseNumber(),this._parseNumber());case window.SVGPathSeg.PATHSEG_ARC_REL:i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcRel(n,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);case window.SVGPathSeg.PATHSEG_ARC_ABS:i={x1:this._parseNumber(),y1:this._parseNumber(),arcAngle:this._parseNumber(),arcLarge:this._parseArcFlag(),arcSweep:this._parseArcFlag(),x:this._parseNumber(),y:this._parseNumber()};return new window.SVGPathSegArcAbs(n,i.x,i.y,i.x1,i.y1,i.arcAngle,i.arcLarge,i.arcSweep);default:throw"Unknown path seg type."}};var o=new e,r=new i(t);if(!r.initialCommandIsMoveTo())return[];for(;r.hasMoreData();){var s=r.parseSegment();if(!s)return[];o.appendSegment(s)}return o.pathSegList})}();var __awaiter=this&&this.__awaiter||function(t,s,a,h){return new(a=a||Promise)(function(i,e){function n(t){try{r(h.next(t))}catch(t){e(t)}}function o(t){try{r(h.throw(t))}catch(t){e(t)}}function r(t){var e;t.done?i(t.value):((e=t.value)instanceof a?e:new a(function(t){t(e)})).then(n,o)}r((h=h.apply(t,s||[])).next())})},__generator=this&&this.__generator||function(i,n){var o,r,s,t,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return t={next:e(0),throw:e(1),return:e(2)},"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,r&&(s=2&e[0]?r.return:e[0]?r.throw||((s=r.return)&&s.call(r),0):r.next)&&!(s=s.call(r,e[1])).done)return s;switch(r=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return a.label++,{value:e[1],done:!1};case 5:a.label++,r=e[1],e=[0];continue;case 7:e=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){a=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){a.label=e[1];break}if(6===e[0]&&a.label<s[1]){a.label=s[1],s=e;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(e);break}s[2]&&a.ops.pop(),a.trys.pop();continue}e=n.call(i,a)}catch(t){e=[6,t],r=0}finally{o=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}},__spreadArrays=this&&this.__spreadArrays||function(){for(var t=0,e=0,i=arguments.length;e<i;e++)t+=arguments[e].length;var n=Array(t),o=0;for(e=0;e<i;e++)for(var r=arguments[e],s=0,a=r.length;s<a;s++,o++)n[o]=r[s];return n};function measureExecTime(t,e){var i=performance.now();t.apply(void 0,e);var n=performance.now();console.log(t.name+" took "+(n-i)+" ms"),console.log.apply(console,__spreadArrays(["Args: "],e))}function getStartStopCoords(t){var e=t.node().pathSegList,i=t.node().getTotalLength(),n={startCoords:{x:void 0,y:void 0},stopCoords:{x:void 0,y:void 0}};if(t.classed("helices")){var o=Math.hypot(Math.abs(e.getItem(1).x-e.getItem(2).x),Math.abs(e.getItem(1).y-e.getItem(2).y)),r=(i-2*o)/2,s=t.node().getPointAtLength(r/2),a=t.node().getPointAtLength(1.5*r+o);n.stopCoords.x=s.x,n.stopCoords.y=s.y,n.startCoords.x=a.x,n.startCoords.y=a.y}else if(t.classed("strands")){var h=e.getItem(0),d=e.getItem(6);n.startCoords.x=(h.x+d.x)/2,n.startCoords.y=(h.y+d.y)/2,n.stopCoords.x=e.getItem(3).x,n.stopCoords.y=e.getItem(3).y}return n}function getPathPointAfterTransform(t,e,i){var n=i,o=d3.select(".topoSvg").node(),r=n.getTransformToElement(o),s=o.createSVGPoint();s.x=t,s.y=e;var a=s.matrixTransform(r);return{x:a.x,y:a.y}}function applyRotationMatrix(t,e,i){var n=math.matrix([[math.cos(math.unit(i,"degrees")),-math.sin(math.unit(i,"degrees"))],[math.sin(math.unit(i,"degrees")),math.cos(math.unit(i,"degrees"))]]),o=math.matrix([[t.x-e.x],[t.y-e.y]]),r=math.multiply(n,o);return{x:r._data[0][0]+e.x,y:r._data[1][0]+e.y}}function composePathHelix(t,e,i,n){return[t.x+e/2,t.y+i[1].size/2-n,t.x,t.y+i[1].size/2,t.x-e/2,t.y+i[1].size/2-n,t.x-e/2,t.y-i[1].size/2+n,t.x,t.y-i[1].size/2,t.x+e/2,t.y-i[1].size/2+n]}function composePathStrand(t,e,i,n,o){return[t.x+e/2,t.y-i[1].size/2,t.x+e/2,t.y+i[1].size/2-n,t.x+e/2+o,t.y+i[1].size/2-n,t.x,t.y+i[1].size/2,t.x-e/2-o,t.y+i[1].size/2-n,t.x-e/2,t.y+i[1].size/2-n,t.x-e/2,t.y-i[1].size/2]}function convertPathCartesianToYReversed(t,i,n){return t.map(function(t,e){return e%2==0?t-i.x:n.y-t})}function convert2DProtsJSONtoTopologyAPIJSON(t,e,i,n){for(var o,r=0,s=arguments;r<s.length;r++){if(void 0===s[r])return}var a=["T","E","B","S","t","e","b","s"],h=["I","H","A","G","i","h","a","g"],d={x:t.metadata.upper_right[0],y:t.metadata.upper_right[1]},c={x:t.metadata.lower_left[0],y:t.metadata.lower_left[1]},u={};u[e]=((o={})[i]={},o),u.ranges={x:Math.abs(d.x)+Math.abs(c.x),y:Math.abs(d.y)+Math.abs(c.y),upperRight:convertPathCartesianToYReversed([d.x,d.y],c,d),lowerLeft:convertPathCartesianToYReversed([c.x,c.y],c,d)},console.log(u),u[e][i][n]={helices:[],coils:[],strands:[],terms:[],extents:[]};for(var l=0,p=Object.entries(t.sses);l<p.length;l++){var S=p[l],g={x:S[1].layout[0],y:S[1].layout[1]},w={x:g.x-c.x,y:d.y-g.y},_={start:Number(S[1].residues[0]),stop:Number(S[1].residues[1]),majoraxis:Number(S[1].size),minoraxis:.8,center:w,color:S[1].color,angle:S[1].angles,twoDProtsSSEId:S[0].replace(/\?/g,""),path:void 0,startCoord:{x:void 0,y:void 0},stopCoord:{x:void 0,y:void 0}},y=S[0].charAt(0);if(h.indexOf(y)<0&&a.indexOf(y)<0&&(y=S[0].charAt(1)),-1<h.indexOf(y)){var P=composePathHelix(g,.8,S,.4);_.path=convertPathCartesianToYReversed(P,c,d),_.stopCoord.x=_.path[2],_.stopCoord.y=_.path[3],_.startCoord.x=_.path[8],_.startCoord.y=_.path[9],u[e][i][n].helices.push(_)}else if(-1<a.indexOf(y)){P=composePathStrand(g,.8,S,.8,.4);_.path=convertPathCartesianToYReversed(P,c,d),_.startCoord.x=_.center.x,_.startCoord.y=_.center.y+_.majoraxis/2,_.stopCoord.x=_.path[6],_.stopCoord.y=_.path[7],u[e][i][n].strands.push(_)}else console.error("Unknown SSE type!")}var f=__spreadArrays(u[e][i][n].helices,u[e][i][n].strands);f.sort(function(t,e){return t.stop<e.start?-1:1}),console.log("Sorted helicesAndSheets array"),console.log(f);for(var m=1;m<f.length;m++){var v=f[m-1],b=f[m];if(v.stop+1!==b.start){var A={start:v.stop+1,stop:b.start-1,path:void 0,color:b.color},V=applyRotationMatrix(v.stopCoord,v.center,v.angle),G=applyRotationMatrix(b.startCoord,b.center,b.angle);A.path=[V.x,V.y,G.x,G.y],u[e][i][n].coils.push(A)}}return u}SVGElement.prototype.getTransformToElement=SVGElement.prototype.getTransformToElement||function(t){return t.getScreenCTM().inverse().multiply(this.getScreenCTM())};var PdbTopologyViewerPlugin=function(){function t(){this.defaultColours={domainSelection:"rgb(255,0,0)",mouseOver:"rgb(211,211,211)",borderColor:"rgb(0,0,0)",qualityGreen:"rgb(0,182.85714285714286,0)",qualityRed:"rgb(291.42857142857144,0,0)",qualityYellow:"rgb(364.2857142857143,364.2857142857143,75.71428571428572)",qualityOrange:"rgb(291.42857142857144,121.42857142857143,0)"},this.displayStyle="border:1px solid #696969;height:100%;",this.errorStyle="border:1px solid #696969; height:54%; padding-top:46%; text-align:center; font-weight:bold;",this.menuStyle="position:relative;height:38px;line-height:38px;background-color:#696969;padding: 0 10px;font-size:16px; color: #efefef;",this.twoDProtsData={topologyData:void 0,residueNumbers:void 0},this.svgWidth=100,this.svgHeight=100,this.subscribeEvents=!0,this.createNewEvent=function(t){var n={};return t.forEach(function(t,e){var i;"function"==typeof MouseEvent?i=new MouseEvent(t,{view:window,bubbles:!0,cancelable:!0}):"function"==typeof document.createEvent&&(i=document.createEvent("MouseEvents")).initEvent(t,!0,!0),n[t]=i}),n},this.getAnnotationFromMappings=function(){var o=this;if(void 0!==this.apiData[1]){function t(t){if(void 0!==r[s[t]]&&0!==Object.entries(r[s[t]]).length){var e=[],i=r[s[t]];for(var n in i)i[n].mappings.forEach(function(t){t.entity_id==o.entityId&&t.chain_id==o.chainId&&e.push({start:t.start.residue_number,end:t.end.residue_number,color:void 0})});0<e.length&&a.domainTypes.push({label:s[t],data:e})}}for(var r=this.apiData[1][this.entryId],s=["UniProt","CATH","Pfam","SCOP"],a=this,e=0;e<3;e++)t(e)}},this.createDomainDropdown=function(){if(this.domainTypes=[{label:"Annotation",data:null}],this.getAnnotationFromMappings(),this.getAnnotationFromOutliers(),this.selectedDomain=this.domainTypes[0],1<this.domainTypes.length){var i="";this.domainTypes.forEach(function(t,e){i=i+'<option value="'+e+'">'+t.label+"</option>"});var t=this.targetEle.querySelector(".menuSelectbox");t.innerHTML=i,t.addEventListener("change",this.displayDomain.bind(this))}else this.targetEle.querySelector(".menuOptions").style.display="none"}}return t.prototype.render=function(t,e){var i=this;e&&void 0!==e.displayStyle&&null!=e.displayStyle&&(this.displayStyle+=e.displayStyle),e&&void 0!==e.errorStyle&&null!=e.errorStyle&&(this.errorStyle+=e.errorStyle),e&&void 0!==e.menuStyle&&null!=e.menuStyle&&(this.menuStyle+=e.menuStyle),this.targetEle=t,this.targetEle&&(this.targetEle.innerHTML=""),t&&e&&e.entryId&&e.entityId?(0==e.subscribeEvents&&(this.subscribeEvents=!1),this.entityId=e.entityId,this.entryId=e.entryId.toLowerCase(),this.domainId=e.domainId,this.familyId=e.familyId,this.structAsymId=e.structAsymId,this.twoDProtsTimestamp=e.twoDProtsTimestamp,void 0===e.chainId||null==e.chainId?this.getObservedResidues(this.entryId).then(function(t){void 0!==t&&void 0!==t[i.entryId]&&void 0!==t[i.entryId][i.entityId]?(i.chainId=t[i.entryId][i.entityId][0].chain_id,i.initPainting()):i.displayError()}):(this.chainId=e.chainId,this.initPainting())):this.displayError("param")},t.prototype.initPainting=function(){var o=this;this.getApiData(this.entryId,this.entityId,this.chainId,this.familyId,this.domainId,this.structAsymId,this.twoDProtsTimestamp).then(function(t){if(t){if(t[2]=convert2DProtsJSONtoTopologyAPIJSON(t[2],o.entryId,o.entityId,o.chainId),console.log(t[2]),void 0===t[0]||void 0===t[2]||void 0===t[4])return o.displayError(),void(void 0===t[2]&&alert("Domain data is not avaialble for the given domain. Please select another domain"));o.apiData=t;var e=o.apiData[2][o.entryId][o.entityId][o.chainId];o.twoDProtsData.topologyData=__spreadArrays(e.helices,e.strands,e.coils).sort(function(t,e){return t.stop<e.start?-1:1}),o.twoDProtsData.residueNumbers={start:o.twoDProtsData.topologyData[0].start,stop:o.twoDProtsData.topologyData.slice(-1)[0].stop},document.querySelector("#pdb-topology-viewer").dispatchEvent(new CustomEvent("PDBtopologyViewerApiDataLoaded",{bubbles:!0,detail:{}})),o.pdbevents=o.createNewEvent(["PDB.topologyViewer.click","PDB.topologyViewer.mouseover","PDB.topologyViewer.mouseout"]),o.getPDBSequenceArray(o.apiData[0][o.entryId]),o.drawTopologyStructures(),o.drawConnectingCoils(),d3.selectAll(".topologyEle:not(.inMaskTag)").clone(!0).classed("topologyEleTopLayer",!0).raise();var i=d3.selectAll(".helicesMaskPath, .strandMaskPath").clone(!0).attr("fill","black").attr("stroke-width",0).classed("inMaskTag",!0),n=d3.select("#residueHighlight3Dto2DMask");i.each(function(){var t=this;n.append(function(){return t})}),o.createDomainDropdown(),o.subscribeEvents&&o.subscribeWcEvents()}})},t.prototype.displayError=function(t){var e="Error: Data not available!";"param"==t&&(e="Error: Invalid Parameters!"),this.targetEle&&(this.targetEle.innerHTML='<div style="'+this.errorStyle+'">'+e+"</div>")},t.prototype.getObservedResidues=function(i){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,fetch("https://www.ebi.ac.uk/pdbe/api/pdb/entry/observed_residues_ratio/"+i)];case 1:return[4,t.sent().json()];case 2:return[2,t.sent()];case 3:return e=t.sent(),console.log("Couldn't load UniProt variants",e),[3,4];case 4:return[2]}})})},t.prototype.getApiData=function(i,t,n,e,o,r,s){return __awaiter(this,void 0,void 0,function(){var e;return __generator(this,function(t){return e=["https://www.ebi.ac.uk/pdbe/api/pdb/entry/entities/"+i,"https://www.ebi.ac.uk/pdbe/api/mappings/"+i,"https://2dprots.ncbr.muni.cz/files/domain/"+o+"/json","https://www.ebi.ac.uk/pdbe/api/validation/residuewise_outlier_summary/entry/"+i,"https://www.ebi.ac.uk/pdbe/api/pdb/entry/polymer_coverage/"+i+"/chain/"+n],console.log(e[2]),[2,Promise.all(e.map(function(t){return fetch(t)})).then(function(t){return Promise.all(t.map(function(t){return 200==t.status?t.json():void 0}))})]})})},t.prototype.getPDBSequenceArray=function(t){for(var e=t.length,i=0;i<e;i++)t[i].entity_id==this.entityId&&(this.sequenceArr=t[i].sequence.split(""))},t.prototype.chunkArray=function(t,e){for(var i=[],n=0,o=t.length;n<o;)i.push(t.slice(n,n+=e));return i},t.prototype.getDomainRange=function(){var e=this,i=[],t=this.apiData[2][this.entryId][this.entityId][this.chainId];for(var n in t)t[n]&&t[n].forEach(function(t){void 0!==t.path&&0<t.path.length&&(i=i.concat(e.chunkArray(t.path,2)))});var o,r,s=this.apiData[2].ranges;s.x>=s.y?(o=[1,this.svgWidth-1],r=[1,s.y*this.svgHeight/s.x]):s.x<s.y?(o=[1,s.x*this.svgWidth/s.y],r=[1,this.svgHeight-1]):console.error("2Dprots canvas ranges issue"),this.xScale=d3.scaleLinear().domain([s.lowerLeft[0],s.upperRight[0]]).range(o),this.yScale=d3.scaleLinear().domain([s.upperRight[1],s.lowerLeft[1]]).range(r),this.zoom=d3.zoom().on("zoom",function(){return e.zoomDraw()})},t.prototype.drawStrandSubpaths=function(t,e,i,n){for(var o=this,r=e-t+1,s=(this.scaledPointsArr[7]-this.scaledPointsArr[1])/r,a=[],h=0;h<r;h++){var d={type:"strands",elementIndex:i,parentSSEId:n};0===h?(d.residue_number=t,d.pathData=[this.scaledPointsArr[4],this.scaledPointsArr[1],this.scaledPointsArr[4],this.scaledPointsArr[1]+s,this.scaledPointsArr[8],this.scaledPointsArr[1]+s,this.scaledPointsArr[8],this.scaledPointsArr[13]]):(d.residue_number=t+h,d.pathData=[a[h-1].pathData[2],a[h-1].pathData[3],a[h-1].pathData[2],a[h-1].pathData[3]+s,a[h-1].pathData[4],a[h-1].pathData[5]+s,a[h-1].pathData[4],a[h-1].pathData[5]]),a.push(d)}this.svgEle.selectAll(".subpath-strands"+i).remove(),this.svgEle.selectAll(".subpath-strands"+i).data(a).enter().append("path").attr("class",function(t,e){return"strandsSubPath subpath-strands"+i+" topo_res_"+t.residue_number}).attr("d",function(t,e){return"M "+t.pathData.join(" ")+" Z"}).attr("stroke","#111").attr("stroke-width","0").attr("fill","white").attr("fill-opacity","0").on("mouseover",function(t){o.mouseoverAction(this,t)}).on("mousemove",function(t){o.mouseoverAction(this,t)}).on("mouseout",function(t){o.mouseoutAction(this,t)}).on("click",function(t){o.clickAction(t)})},t.prototype.drawStrandMaskShape=function(i){var n=this.scaledPointsArr,t=[7,8,10,12],e=[0,1,2,3,4,5,9,11,13];n[0]>n[6]&&(t=[0,1,2,3,4,5,9,11,13],e=[7,8,10,12]);for(var o=t.length,r=0;r<o;r++)n[t[r]]=n[t[r]]+.3;for(var s=e.length,a=0;a<s;a++)n[e[a]]=n[e[a]]-.3;n[14]=n[8],n[15]=n[13],n[16]=n[8],n[17]=n[7],n[18]=n[4],n[19]=n[7],n[20]=n[4],n[21]=n[1],this.svgEle.selectAll(".maskpath-strands"+i).remove(),this.svgEle.selectAll(".maskpath-strands"+i).data([n]).enter().append("path").attr("class",function(t,e){return"strandMaskPath maskpath-strands"+i}).attr("d",function(t,e){return"M"+n.join(" ")+"Z"}).attr("stroke","#111").attr("stroke-width",.3).attr("fill","white").attr("stroke-opacity",0)},t.prototype.renderTooltip=function(t,e){var i=d3.select(".pdbTopologyTooltip");if(null==i._groups[0][0]&&(i=d3.select("body").append("div").attr("class","pdbTopologyTooltip").attr("style","display: none;width: auto;position: absolute;background: #fff;padding: 5px;border: 1px solid #666;border-radius: 5px;box-shadow: 5px 6px 5px 0 rgba(0,0,0,.17);font-size: .9em;color: #555;z-index: 998;")),"show"===e){var n=d3.event.pageX,o=d3.event.pageY,r="Residue "+t.residue_number+" ("+this.sequenceArr[t.residue_number-1]+")";void 0!==t.tooltipMsg&&(r=void 0!==t.tooltipPosition&&"postfix"===t.tooltipPosition?r+" "+t.tooltipMsg:t.tooltipMsg+" "+r),i.html(r).style("display","block").style("top",o+15+"px").style("left",n+10+"px")}else i.style("display","none")},t.prototype.dispatchEvent=function(t,e,i){var n=this.targetEle;void 0!==i&&(n=i),void 0!==e&&(this.pdbevents[t].eventData=e),n.dispatchEvent(this.pdbevents[t])},t.prototype.clickAction=function(t){this.dispatchEvent("PDB.topologyViewer.click",{residueNumber:t.residue_number,type:t.type,entryId:this.entryId,entityId:this.entityId,chainId:this.chainId})},t.prototype.mouseoverAction=function(t,e){var i=d3.select(t);this.renderTooltip(e,"show"),"strands"!==e.type&&"helices"!==e.type||i.attr("fill",this.defaultColours.mouseOver).attr("fill-opacity","1.0"),"coils"===e.type&&i.attr("stroke",this.defaultColours.mouseOver).attr("stroke-width",1),this.dispatchEvent("PDB.topologyViewer.mouseover",{residueNumber:e.residue_number,type:e.type,entryId:this.entryId,entityId:this.entityId,chainId:this.chainId,parentSSEId:e.parentSSEId||void 0})},t.prototype.mouseoutAction=function(t,e){var i="white",n=0,o=.3,r=d3.select(t);this.renderTooltip("","hide"),r.classed("coloured")&&"coils"!==e.type?(i=r.attr("data-color"),o=n=1):"coils"===e.type&&(i=r.attr("data-color-coil")),"strands"!==e.type&&"helices"!==e.type||r.attr("fill",i).attr("fill-opacity",n),"coils"===e.type&&r.attr("stroke",i).attr("stroke-width",o),this.dispatchEvent("PDB.topologyViewer.mouseout",{entryId:this.entryId,entityId:this.entityId,chainId:this.chainId,parentSSEId:e.parentSSEId||void 0})},t.prototype.drawHelicesSubpaths=function(t,e,i,n,o){var r=this;var s=-5;this.scaledPointsArr[3]>this.scaledPointsArr[9]&&(s=5);var a=e-t+1;s=0;var h=(this.scaledPointsArr[9]-s-this.scaledPointsArr[3])/a,d=0,c=this.svgEle.select(".helices"+i+":not(.inMaskTag)").node().getBBox().height+h/2,u=c/a;d=(h=((c-=u/2)-u/2)/a)-u/10,this.scaledPointsArr[3]>this.scaledPointsArr[9]&&(d=-(c+u));for(var l=[],p={},S=0;S<a;S++)p={type:"helices",parentSSEId:o},0===S?(this.scaledPointsArr[3]<this.scaledPointsArr[9]?p.residue_number=e:p.residue_number=t,p.pathData=[this.scaledPointsArr[0],this.scaledPointsArr[3]+d,this.scaledPointsArr[4],this.scaledPointsArr[3]+d,this.scaledPointsArr[4],this.scaledPointsArr[3]+d+h,this.scaledPointsArr[0],this.scaledPointsArr[3]+d+h]):(this.scaledPointsArr[3]<this.scaledPointsArr[9]?p.residue_number=e-S:p.residue_number=t+S,p.pathData=[l[S-1].pathData[6],l[S-1].pathData[7],l[S-1].pathData[4],l[S-1].pathData[5],l[S-1].pathData[4],l[S-1].pathData[5]+h,l[S-1].pathData[6],l[S-1].pathData[5]+h]),l.push(p);this.svgEle.selectAll(".subpath-helices"+i).remove(),this.svgEle.selectAll(".subpath-helices"+i).data(l).enter().append("path").attr("class",function(t){return"helicesSubPath subpath-helices"+i+" topo_res_"+t.residue_number}).attr("d",function(t){return"M"+t.pathData.join(" ")+" Z"}).attr("stroke","#111").attr("stroke-width","0").attr("fill","white").attr("fill-opacity","0").on("mouseover",function(t){r.mouseoverAction(this,t)}).on("mousemove",function(t){r.mouseoverAction(this,t)}).on("mouseout",function(t){r.mouseoutAction(this,t)}).on("click",function(t){r.clickAction(t)})},t.prototype.drawHelicesMaskShape=function(e){var t=[[this.scaledPointsArr[0]-.3,this.scaledPointsArr[1],this.scaledPointsArr[2],this.scaledPointsArr[3]-.3,this.scaledPointsArr[4]+.3,this.scaledPointsArr[5],this.scaledPointsArr[4]+.3,this.scaledPointsArr[3],this.scaledPointsArr[0]-.3,this.scaledPointsArr[3]],[this.scaledPointsArr[6]+.3,this.scaledPointsArr[7],this.scaledPointsArr[8],this.scaledPointsArr[9]+.3,this.scaledPointsArr[10]-.3,this.scaledPointsArr[11],this.scaledPointsArr[10]-.3,this.scaledPointsArr[9],this.scaledPointsArr[6]+.3,this.scaledPointsArr[9]]];this.scaledPointsArr[3]>this.scaledPointsArr[9]&&(t=[[this.scaledPointsArr[0]-.3,this.scaledPointsArr[1],this.scaledPointsArr[2],this.scaledPointsArr[3]+2,this.scaledPointsArr[4]+.3,this.scaledPointsArr[5],this.scaledPointsArr[4]+.3,this.scaledPointsArr[3],this.scaledPointsArr[0]-.3,this.scaledPointsArr[3]],[this.scaledPointsArr[6]+.3,this.scaledPointsArr[7],this.scaledPointsArr[8],this.scaledPointsArr[9]-.3,this.scaledPointsArr[10]-.3,this.scaledPointsArr[11],this.scaledPointsArr[10]-.3,this.scaledPointsArr[9],this.scaledPointsArr[6]+.3,this.scaledPointsArr[9]]]),this.svgEle.selectAll(".maskpath-helices"+e).remove(),this.svgEle.selectAll(".maskpath-helices"+e).data(t).enter().append("path").attr("class",function(t){return"helicesMaskPath maskpath-helices"+e}).attr("d",function(t){return"M"+t[0]+" "+t[1]+" Q"+t[2]+" "+t[3]+" "+t[4]+" "+t[5]+" L"+t[6]+" "+t[7]+" "+t[8]+" "+t[9]+" Z"}).attr("stroke","#111").attr("stroke-width",.3).attr("fill","white").attr("stroke-opacity",0)},t.prototype.drawCoilsSubpaths=function(t,e,i,n){var o=this,r=this.svgEle.select(".coils"+i),s=e-t+1,a=r.node().getTotalLength()/s,h=[],d=void 0,c=void 0,u={};if(1==s)u={residue_number:t,type:"coils",pathData:o.scaledPointsArr,elementIndex:i,color:n},h.push(u);else for(var l=0;l<s;l++){var p=a*(l+1),S=r.node().getPointAtLength(p);(u={residue_number:t+l,type:"coils",elementIndex:i,color:n}).pathData=void 0===c?[o.scaledPointsArr[0],o.scaledPointsArr[1],S.x,S.y]:[d.x,d.y,S.x,S.y],d=S,c=0,h.push(u)}-1!==t&&-1!==e&&(this.svgEle.selectAll(".subpath-coils"+i).remove(),this.svgEle.selectAll(".subpath-coils"+i).data(h).enter().append("path").attr("class",function(t){return"coilsSubPath subpath-coils"+i+" topo_res_"+t.residue_number}).attr("data-color-coil",function(t){return t.color}).attr("d",function(t){return"M "+t.pathData.join(" ")}).attr("stroke",function(t){return t.color}).attr("stroke-width",.3).attr("fill","none").attr("stroke-opacity","1").attr("mask","url(#cutoutCoilsMask)").on("mouseover",function(t){o.mouseoverAction(this,t)}).on("mousemove",function(t){o.mouseoverAction(this,t)}).on("mouseout",function(t){o.mouseoutAction(this,t)}).on("click",function(t){o.clickAction(t)}),this.svgEle.selectAll(".coils"+i).attr("stroke-opacity",0));this.apiData[2][this.entryId][this.entityId][this.chainId].terms,this.apiData[2][this.entryId][this.entityId][this.chainId].coils.length},t.prototype.drawConnectingCoils=function(){var t=this.apiData[2][this.entryId][this.entityId][this.chainId],e=__spreadArrays(t.helices,t.strands);e.sort(function(t,e){return t.stop<e.start?-1:1}),console.log("Sorted helicesAndSheets array"),console.log(e);for(var i=1;i<e.length;i++){var n=e[i-1],o=e[i],r=d3.select("#"+n.twoDProtsSSEId),s=d3.select("#"+o.twoDProtsSSEId),a=getStartStopCoords(r),h=getStartStopCoords(s),d=getPathPointAfterTransform(a.stopCoords.x,a.stopCoords.y,r.node()),c=getPathPointAfterTransform(h.startCoords.x,h.startCoords.y,s.node());d3.select("svg.topoSvg").append("line").attr("x1",d.x).attr("y1",d.y).attr("x2",c.x).attr("y2",c.y).attr("stroke",o.color).attr("stroke-width",.3).attr("id",n.twoDProtsSSEId+"_"+o.twoDProtsSSEId).attr("mask","url(#cutoutCoilsMask)")}},t.prototype.drawTopologyStructures=function(){var d=this;this.targetEle.innerHTML='<div style="'+this.displayStyle+'">\n            <div class="svgSection" style="position:relative;width:100%;"></div>\n            <div style="'+this.menuStyle+'">\n                <img src="https://www.ebi.ac.uk/pdbe/entry/static/images/logos/PDBe/logo_T_64.png" style="height:15px; width: 15px; border:0;position: absolute;margin-top: 11px;" />\n                <a style="color: #efefef;border-bottom:none; cursor:pointer;margin-left: 16px;" target="_blank" href="https://pdbe.org/'+this.entryId+'">'+this.entryId+'</a> | <span class="menuDesc">Entity '+this.entityId+" | Chain "+this.chainId.toUpperCase()+'</span>\n                <div class="menuOptions" style="float:right;margin-right: 20px;">\n                    <select class="menuSelectbox" style="margin-right: 10px;"><option value="">Select</option></select>\n                </div>\n            </div>\n        </div>';var t=this.targetEle.offsetWidth,e=this.targetEle.offsetHeight;0==t&&(t=this.targetEle.parentElement.offsetWidth),0==e&&(e=this.targetEle.parentElement.offsetHeight),t<=330&&(this.targetEle.querySelector(".menuDesc").innerText=this.entityId+" | "+this.chainId.toUpperCase());var i=this.targetEle.querySelector(".svgSection");i.style.height="calc(100% - 38px)",i.innerHTML='<svg class="topoSvg" preserveAspectRatio="xMidYMid meet" viewBox="0 0 100 100" style="width:calc(100% - 5px);height:calc(100% - 20px);margin:10px 0;">\t\n\t\t\t<defs>\n\t\t\t\t<mask id="cutoutCoilsMask" maskUnits="objectBoundingBox" x=\'0%\' y=\'0%\' width=\'100%\' height=\'100%\'>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tclass="maskRect"\n\t\t\t\t\t\tx="0"\n\t\t\t\t\t\ty="0"\n\t\t\t\t\t\twidth="100"\n\t\t\t\t\t\theight="100"\n\t\t\t\t\t\tfill="white" />\n\t\t\t\t</mask>\n\t\t\t\t<mask id="residueHighlight3Dto2DMask" maskUnits="objectBoundingBox" x=\'0%\' y=\'0%\' width=\'100%\' height=\'100%\'>\n\t\t\t\t\t<rect\n\t\t\t\t\t\tclass="maskRect"\n\t\t\t\t\t\tx="0"\n\t\t\t\t\t\ty="0"\n\t\t\t\t\t\twidth="100"\n\t\t\t\t\t\theight="100"\n\t\t\t\t\t\tfill="white" />\n\t\t\t\t</mask>\n\t\t\t</defs>\n\t\t</svg>',this.svgEle=d3.select(this.targetEle).select(".topoSvg"),this.getDomainRange(),this.scaledPointsArr=[],this.svgEle.on("contextmenu",function(t,e){d3.event.preventDefault()});function n(h){if("coils"===h)return"continue";var t=o[h];if(!t)return{value:void 0};t.forEach(function(a,t){if(void 0!==a.path&&0<a.path.length&&"terms"!==h){a.secStrType=h,a.pathIndex=t,a.proteinData={entryId:d.entryId,entityId:d.entityId,chainId:d.chainId};var e=d.svgEle.selectAll("path."+h+t).data([a]).enter().append("path").attr("class",function(){return-1===a.start&&-1===a.stop&&"terms"!==h?"dashedEle topologyEle "+h+" "+h+t+" topoEleRange_"+a.start+"-"+a.stop:"topologyEle "+h+" "+h+t+" topoEleRange_"+a.start+"-"+a.stop}).attr("d",function(t){for(var e="M",i=a.path.length,n=!0,o=0;o<i;o++){if("helices"!==h||2!==o&&8!==o||(e+=" Q"),("helices"===h&&6===o||"coils"===h&&a.path.length<12&&8===o)&&(e+=" L"),n){var r=d.xScale(a.path[o]);e+=" "+r,d.scaledPointsArr.push(r)}else{var s=d.yScale(a.path[o]);e+=" "+s,d.scaledPointsArr.push(s)}n=!n}return"strands"!==h&&"helices"!==h||(e+=" Z"),e}).attr("fill","none").attr("stroke-width",.5).attr("stroke",a.color).attr("id",a.twoDProtsSSEId),i=e.clone(!0).attr("fill","black").attr("stroke-width",0).classed("inMaskTag",!0);if(d3.select("#cutoutCoilsMask").append(function(){return i.node()}),-1===a.start&&-1===a.stop&&e.attr("stroke-dasharray","0.9"),"strands"===h){var n=d.xScale(a.center.x),o=d.yScale(a.center.y);d.drawStrandSubpaths(a.start,a.stop,t,a.twoDProtsSSEId),d.drawStrandMaskShape(t),d.svgEle._groups[0][0].append(e.node());d3.selectAll(".strands"+t+", .maskpath-strands"+t+", .subpath-strands"+t).attr("transform","rotate("+a.angle+", "+n+", "+o+")")}if("helices"===h){n=d.xScale(a.center.x),o=d.yScale(a.center.y);d.drawHelicesSubpaths(a.start,a.stop,t,0,a.twoDProtsSSEId),d.drawHelicesMaskShape(t),d.svgEle._groups[0][0].append(e.node());d3.selectAll(".helices"+t+", .maskpath-helices"+t+", .subpath-helices"+t).attr("transform","rotate("+a.angle+", "+n+", "+o+")")}d.scaledPointsArr=[]}})}var o=this.apiData[2][this.entryId][this.entityId][this.chainId];for(var r in o){var s=n(r);if("object"==typeof s)return s.value}var a=this.svgEle.node().getBBox(),h=[a.x-1,a.y-1,a.width+1,a.height+1].join(" ");this.svgEle.attr("viewBox",h),this.svgEle._groups[0][0].append(this.svgEle.selectAll(".validationResidue").node())},t.prototype.zoomDraw=function(){var e=this,a=d3.event.transform.rescaleX(this.xScale),h=d3.event.transform.rescaleY(this.yScale),d=this;d.scaledPointsArr=[];var t=this.svgEle.selectAll(".topologyEle"),c=0,u=0,l=0;t.each(function(t){d3.select(d3.select(this).node()).attr("d",function(t){c=t.pathIndex,u=t.start,l=t.stop;for(var e="M",i=t.path.length,n=!0,o=0;o<i;o++){if("helices"!==t.secStrType||2!==o&&8!==o||(e+=" Q"),("helices"===t.secStrType&&6===o||"coils"===t.secStrType&&t.path.length<12&&8===o)&&(e+=" L"),n){var r=a(t.path[o]);e+=" "+r,d.scaledPointsArr.push(r)}else{var s=h(t.path[o]);e+=" "+s,d.scaledPointsArr.push(s)}n=!n}return"strands"!==t.secStrType&&"helices"!==t.secStrType||(e+=" Z"),e}),"helices"===t.secStrType?(d.drawHelicesSubpaths(u,l,c,0),d.drawHelicesMaskShape(c),d.svgEle._groups[0][0].append(d3.select(this).node())):"strands"===t.secStrType?(d.drawStrandSubpaths(u,l,c),d.drawStrandMaskShape(c),d.svgEle._groups[0][0].append(d3.select(this).node())):"coils"===t.secStrType&&d.drawCoilsSubpaths(u,l,c),d.scaledPointsArr=[]});var s=0;this.svgEle.selectAll(".validationResidue").attr("transform",function(t){var e=d.svgEle.select(".topo_res_"+t.residue_number),i=e.node().getBBox(),n=e.data(),o={x:0,y:0};if("strands"===n[0].type||"helices"===n[0].type)o={x:i.x+i.width/2,y:i.y+i.height/2};else{var r=e.node().getPointAtLength(e.node().getTotalLength()/2);o={x:r.x,y:r.y}}return s=i.height/2,"translate("+o.x+","+o.y+")"}).attr("d",d3.symbol().type(function(t,e){return d3.symbols[0]}).size(s)),this.svgEle.selectAll(".residueSelection").attr("d",function(t){var e=d3.select(this).data();return d.svgEle.select(".topo_res_"+e[0].residueNumber).attr("d")}),this.svgEle._groups[0][0].querySelectorAll(".coilsSubPath").forEach(function(t){return e.svgEle._groups[0][0].append(t)}),this.svgEle._groups[0][0].querySelectorAll(".dashedEle").forEach(function(t){return e.svgEle._groups[0][0].append(t)}),this.displayDomain("zoom"),this.svgEle._groups[0][0].querySelectorAll(".validationResidue").forEach(function(t){return e.svgEle._groups[0][0].append(t)}),this.svgEle._groups[0][0].querySelectorAll(".residueSelection").forEach(function(t){return e.svgEle._groups[0][0].append(t)})},t.prototype.clearHighlight=function(){this.svgEle.selectAll(".residueHighlight").remove()},t.prototype.highlight=function(t,e,o,r){function i(e){var t=u.svgEle.select(".topo_res_"+e);if(t&&t._groups&&null==t._groups[0][0])return{value:void 0};var i=t.node(),n=t.data();o&&(a="string"==typeof o?h=o:(h=d3.rgb(o.r,o.g,o.b),d3.rgb(o.r,o.g,o.b))),"strands"!==n[0].type&&"helices"!==n[0].type?(a="none",d=2,c=.5):h="none",u.svgEle.append("path").data([{residueNumber:e}]).attr("class",function(t){return"click"==r?"residueSelection seletectedResidue_"+e:"residueHighlight highlightResidue_"+e}).attr("d",t.attr("d")).attr("transform",t.attr("transform")).attr("fill",a).attr("fill-opacity",.5).attr("stroke",h).attr("stroke-opacity",c).attr("stroke-width",d).on("mouseover",function(t){s.mouseoverAction(i,n[0])}).on("mousemove",function(t){s.mouseoverAction(i,n[0])}).on("mouseout",function(t){s.mouseoutAction(i,n[0])}).on("click",function(t){s.clickAction(n[0])})}for(var s=this,a="#000000",h="#000000",d=.3,c=0,u=this,n=t;n<=e;n++){var l=i(n);if("object"==typeof l)return l.value}},t.prototype.drawValidationShape=function(t,e,i){var n=this,o=n.svgEle.select(".topo_res_"+t);if(null!=o._groups[0][0]){var r=o.node().getBBox(),s=o.data(),a={x:0,y:0};if("strands"===s[0].type||"helices"===s[0].type)a={x:r.x+r.width/2,y:r.y+r.height/2};else{var h=o.node().getPointAtLength(o.node().getTotalLength()/2);a={x:h.x,y:h.y}}var d={residue_number:t,tooltipMsg:"Validation issue: RSRZ <br>",tooltipPosition:"prefix"};this.svgEle.append("path").attr("class","validationResidue rsrz_"+t).data([d]).attr("fill",i).attr("stroke","#000").attr("stroke-width",.3).attr("transform",function(t){return"translate("+a.x+","+a.y+")"}).attr("d",d3.symbol().type(function(t,e){return d3.symbols[0]}).size(r.height/2)).style("display","none").on("mouseover",function(t){n.mouseoverAction(this,t)}).on("mousemove",function(t){n.mouseoverAction(this,t)}).on("mouseout",function(t){n.mouseoutAction(this,t)}).on("click",function(t){n.clickAction(t)})}},t.prototype.getChainStartAndEnd=function(){if(void 0!==this.apiData[4]){for(var t=this.apiData[4][this.entryId].molecules[0].chains,i={start:0,end:0},e=t.length,n=0;n<e;n++)if(t[n].chain_id==this.chainId){t[n].observed.forEach(function(t,e){0==e?(i.start=t.start.residue_number,i.end=t.end.residue_number):(t.start.residue_number<i.start&&(i.start=t.start.residue_number),t.end.residue_number>i.end&&(i.end=t.end.residue_number))});break}return i}},t.prototype.getAnnotationFromOutliers=function(){var e=this,r=this,t=this.getChainStartAndEnd(),s=[{start:t.start,end:t.end,color:r.defaultColours.qualityGreen,tooltipMsg:"No validation issue reported for "}],a=[],h=[0];if(void 0!==this.apiData[3]){var i=this.apiData[3][this.entryId];void 0!==i&&void 0!==i.molecules&&0<i.molecules.length&&(i.molecules.forEach(function(t){t.entity_id==e.entityId&&t.chains.forEach(function(t){t.chain_id==e.chainId&&t.models.forEach(function(t){t.residues.forEach(function(t){var e=r.defaultColours.qualityYellow,i="issue";if(1!==t.outlier_types.length||"RSRZ"!==t.outlier_types[0]){1===t.outlier_types.length?e=r.defaultColours.qualityYellow:i=(e=2===t.outlier_types.length?r.defaultColours.qualityOrange:r.defaultColours.qualityRed,"issues"),h.push(t.residue_number);var n="Validation "+i+": "+t.outlier_types.join(", ")+"<br>";-1<a.indexOf(t.residue_number)&&(n="Validation issues: "+t.outlier_types.join(", ")+", RSRZ<br>"),s.push({start:parseInt(t.residue_number),end:parseInt(t.residue_number),color:e,tooltipMsg:n,tooltipPosition:"prefix"})}else{e=r.defaultColours.qualityRed,r.drawValidationShape(t.residue_number,"circle",e),a.push(t.residue_number);var o=h.indexOf(t.residue_number);-1<o?s[o].tooltipMsg=s[o].tooltipMsg.replace("<br>",", RSRZ<br>"):(s.push({start:parseInt(t.residue_number),end:parseInt(t.residue_number),color:r.defaultColours.qualityGreen,tooltipMsg:"Validation issue: RSRZ <br>",tooltipPosition:"prefix"}),h.push(t.residue_number))}})})})}),0<s.length&&this.domainTypes.push({label:"Quality",data:s}))}},t.prototype.resetTheme=function(){var r=this;this.svgEle.selectAll(".coloured").each(function(t){var e=d3.select(this),i=e.node();e.data()[0].tooltipMsg=void 0,e.data()[0].tooltipPosition=void 0;var n=d3.select(i).classed("coloured",!1),o=n.attr("class").split(" ");-1<o.indexOf("strandsSubPath")||-1<o.indexOf("helicesSubPath")?n.attr("fill","white").attr("fill-opacity",0):n.attr("stroke",r.defaultColours.borderColor).attr("stroke-width",.3)}),this.svgEle.selectAll(".validationResidue").style("display","none")},t.prototype.changeResidueColor=function(t,e,i,n){void 0===e&&(e=this.defaultColours.domainSelection);var o=this.svgEle.select(".topo_res_"+t);null!=o._groups[0][0]&&(o.data()[0].tooltipMsg=i,o.data()[0].tooltipPosition=n,o.attr("stroke",function(t){return"coils"===t.type?e:"#111"}).attr("stroke-width",function(t){return"coils"===t.type?1:0}).attr("fill",function(t){return"coils"===t.type?"none":e}).attr("fill-opacity",function(t){return"coils"===t.type?0:1}).classed("coloured",!0).attr("data-color",e))},t.prototype.updateTheme=function(t){var i=this;t.forEach(function(t){for(var e=t.start;e<=t.end;e++)i.changeResidueColor(e,t.color,t.tooltipMsg,t.tooltipPosition)})},t.prototype.displayDomain=function(t){var e=this.targetEle.querySelector(".menuSelectbox"),i=parseInt(e.value),n=this.domainTypes[i];null!==n.data?(this.resetTheme(),this.updateTheme(n.data),"Quality"===n.label&&this.svgEle.selectAll(".validationResidue").style("display","block")):"zoom"!==t&&this.resetTheme()},t.prototype.resetDisplay=function(){this.targetEle.querySelector(".menuSelectbox").value=0,this.displayDomain()},t.prototype.handleSeqViewerEvents=function(t,e){if(void 0!==t.eventData){if(t.eventData.entryId.toLowerCase()!=this.entryId.toLowerCase()||t.eventData.entityId!=this.entityId)return;if(t.eventData.elementData.pathData.chain_id&&t.eventData.elementData.pathData.chain_id!=this.chainId)return;var i="residueSelection";"mouseover"==e&&(i="residueHighlight"),this.svgEle.selectAll("."+i).remove();var n=void 0,o=void 0;if(t.eventData.residueNumber?(n=t.eventData.residueNumber,o=t.eventData.residueNumber):t.eventData.elementData.pathData.start.residue_number&&t.eventData.elementData.pathData.end.residue_number&&(n=t.eventData.elementData.pathData.start.residue_number,o=t.eventData.elementData.pathData.end.residue_number),void 0!==n&&void 0!==o){var r=void 0;r=t.eventData.elementData.color&&1==t.eventData.elementData.color.length?t.eventData.elementData.color[0]:{r:t.eventData.elementData.color[0],g:t.eventData.elementData.color[1],b:t.eventData.elementData.color[2]},this.highlight(n,o,r,e)}}},t.prototype.handleProtvistaEvents=function(t,e){if(void 0!==t.detail){var i=void 0,n="residueSelection";if("mouseover"==e&&(n="residueHighlight"),this.svgEle.selectAll("."+n).remove(),void 0!==t.detail.feature){if(void 0!==t.detail.feature.accession){var o=t.detail.feature.accession.split(" ");if("Chain"==o[0]&&o[1].toLowerCase()!=this.chainId.toLowerCase())return}-1<t.detail.trackIndex&&t.detail.feature.locations&&t.detail.feature.locations[0].fragments[t.detail.trackIndex].color&&(i=t.detail.feature.locations[0].fragments[t.detail.trackIndex].color),void 0===i&&t.detail.feature.color&&(i=t.detail.feature.color)}if(void 0===i&&t.detail.color&&(i=t.detail.color),void 0!==i){i=/rgb/g.test(i)?i.substring(4,i.length-1).split(","):[i]}var r=void 0;i&&(r=1==i.length?i[0]:{r:i[0],g:i[1],b:i[2]}),this.highlight(t.detail.start,t.detail.end,r,e)}},t.prototype.handleMolstarEvents=function(t,e){if(void 0!==t.eventData&&0<Object.keys(t.eventData).length){var i="residueSelection";if("mouseover"==e&&(i="residueHighlight"),this.svgEle.selectAll("."+i).remove(),t.eventData.entry_id.toLowerCase()!=this.entryId.toLowerCase()||t.eventData.entity_id!=this.entityId)return;if(this.highlight(t.eventData.seq_id,t.eventData.seq_id,void 0,e),"mouseover"===e){var n,o=t.eventData.residueNumber,r=this.apiData[2][this.entryId][this.entityId][this.chainId];if(__spreadArrays(r.helices,r.strands).forEach(function(t){t.start<=o&&t.stop>=o&&(n=t)}),n){var s=n.twoDProtsSSEId;document.querySelector("overprot-viewer").dispatchEvent(new CustomEvent("PDB.overprot.do.hover",{detail:{sses:[{label:s}]}}))}}else"mouseout"===e&&document.querySelector("overprot-viewer").dispatchEvent(new CustomEvent("PDB.overprot.do.hover",{detail:{sses:[]}}))}},t.prototype.subscribeWcEvents=function(){var e=this;document.addEventListener("PDB.seqViewer.click",function(t){e.handleSeqViewerEvents(t,"click")}),document.addEventListener("PDB.seqViewer.mouseover",function(t){e.handleSeqViewerEvents(t,"mouseover")}),document.addEventListener("PDB.seqViewer.mouseout",function(){e.svgEle.selectAll(".residueHighlight").remove()}),document.addEventListener("PDB.litemol.click",function(t){e.svgEle.selectAll(".residueSelection").remove(),t.eventData.entryId.toLowerCase()==e.entryId.toLowerCase()&&t.eventData.entityId==e.entityId&&t.eventData.chainId.toLowerCase()==e.chainId.toLowerCase()&&e.highlight(t.eventData.residueNumber,t.eventData.residueNumber,void 0,"click")}),document.addEventListener("PDB.litemol.mouseover",function(t){e.svgEle.selectAll(".residueHighlight").remove(),t.eventData.entryId.toLowerCase()==e.entryId.toLowerCase()&&t.eventData.entityId==e.entityId&&t.eventData.chainId.toLowerCase()==e.chainId.toLowerCase()&&e.highlight(t.eventData.residueNumber,t.eventData.residueNumber,void 0,"mouseover")}),document.addEventListener("protvista-click",function(t){e.handleProtvistaEvents(t,"click")}),document.addEventListener("protvista-mouseover",function(t){e.handleProtvistaEvents(t,"mouseover")}),document.addEventListener("protvista-mouseout",function(){e.svgEle.selectAll(".residueHighlight").remove()}),document.addEventListener("PDB.molstar.click",function(t){e.handleMolstarEvents(t,"click")}),document.addEventListener("PDB.molstar.mouseover",function(t){e.handleMolstarEvents(t,"mouseover")}),document.addEventListener("PDB.molstar.mouseout",function(){e.svgEle.selectAll(".residueHighlight").remove()})},t}();window.PdbTopologyViewerPlugin=PdbTopologyViewerPlugin;